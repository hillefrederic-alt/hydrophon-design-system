---
phase: 02-icons-a-basic-interactions
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - design-system/tokens/buttons.json
  - design-system/docs/buttons.md
autonomous: true

must_haves:
  truths:
    - "Developer can implement primary button with all states (default, hover, active, focus, disabled)"
    - "Developer can implement secondary button with outline style and all states"
    - "Developer can implement tertiary/ghost button for low-emphasis actions"
    - "User can visually distinguish primary from secondary from tertiary buttons"
    - "All button sizes (small, medium, large) have documented dimensions"
    - "Icon buttons have appropriate touch targets and accessibility patterns"
  artifacts:
    - path: "design-system/tokens/buttons.json"
      provides: "Button component tokens with three-tier architecture"
      contains: "button.primary.background.default"
    - path: "design-system/docs/buttons.md"
      provides: "German button documentation with variants, sizes, states, and icon buttons"
      min_lines: 200
  key_links:
    - from: "design-system/tokens/buttons.json"
      to: "design-system/tokens/colors.json"
      via: "semantic color references"
      pattern: "\\{color\\.|\\{hydrophon\\."
    - from: "design-system/tokens/buttons.json"
      to: "design-system/tokens/icons.json"
      via: "icon sizing references for icon buttons"
      pattern: "\\{icon\\.size\\."
    - from: "design-system/tokens/buttons.json"
      to: "design-system/tokens/spacing.json"
      via: "padding and gap references"
      pattern: "\\{spacing\\."
---

<objective>
Create comprehensive button component tokens and documentation covering primary, secondary, and tertiary variants, three sizes (small, medium, large), all interactive states, and icon button patterns.

Purpose: Enables developers to implement consistent, accessible buttons across the design system with proper visual hierarchy distinguishing action importance.
Output: Button tokens (JSON) and button documentation (Markdown)
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-icons-a-basic-interactions/02-CONTEXT.md
@.planning/phases/02-icons-a-basic-interactions/02-RESEARCH.md
@.planning/phases/02-icons-a-basic-interactions/02-01-SUMMARY.md
@design-system/tokens/colors.json
@design-system/tokens/spacing.json
@design-system/tokens/effects.json
@design-system/tokens/typography.json
@design-system/tokens/icons.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create button design tokens</name>
  <files>design-system/tokens/buttons.json</files>
  <action>
**Pre-flight check: Verify icon tokens exist before creating references**
Before creating button tokens, verify that icon tokens from 02-01 are available:
1. Check design-system/tokens/icons.json exists
2. Verify it contains icon.size.xs, icon.size.sm, icon.size.md tokens
3. Run npm run build in design-system/ to confirm icon tokens compile
4. Check build/css/variables.css contains --icon-size-xs, --icon-size-sm, --icon-size-md

If icon tokens are missing or don't compile, STOP and report the issue - button tokens cannot reference non-existent icon tokens.

**Once icon tokens verified, create button component tokens in W3C DTCG format ($value, $type syntax) with three-tier architecture:**

**Semantic Action Tokens (layer between primitives and components):**
Add to colors section or create new section for semantic action colors:
- color.action.primary: reference {hydrophon.blau.500}
- color.action.primaryHover: reference {hydrophon.blau.600}
- color.action.primaryActive: reference {hydrophon.blau.700}
- color.text.onPrimary: reference {neutral.white}
- color.text.disabled: reference {neutral.400}
- color.action.disabled: reference {neutral.200}

**Button Component Tokens:**

Primary Button:
- button.primary.background.default: {color.action.primary}
- button.primary.background.hover: {color.action.primaryHover}
- button.primary.background.active: {color.action.primaryActive}
- button.primary.background.disabled: {color.action.disabled}
- button.primary.foreground.default: {color.text.onPrimary}
- button.primary.foreground.disabled: {color.text.disabled}
- button.primary.border.default: transparent
- button.primary.border.focus: {hydrophon.blau.300}

Secondary Button (outline style per CONTEXT.md):
- button.secondary.background.default: transparent
- button.secondary.background.hover: {hydrophon.blau.50}
- button.secondary.background.active: {hydrophon.blau.100}
- button.secondary.background.disabled: transparent
- button.secondary.foreground.default: {hydrophon.blau.500}
- button.secondary.foreground.hover: {hydrophon.blau.600}
- button.secondary.foreground.disabled: {neutral.400}
- button.secondary.border.default: {hydrophon.blau.500}
- button.secondary.border.hover: {hydrophon.blau.600}
- button.secondary.border.disabled: {neutral.300}
- button.secondary.border.focus: {hydrophon.blau.300}

Tertiary/Ghost Button (text-only, minimal styling):
- button.tertiary.background.default: transparent
- button.tertiary.background.hover: {neutral.100}
- button.tertiary.background.active: {neutral.200}
- button.tertiary.background.disabled: transparent
- button.tertiary.foreground.default: {hydrophon.blau.500}
- button.tertiary.foreground.hover: {hydrophon.blau.600}
- button.tertiary.foreground.disabled: {neutral.400}
- button.tertiary.border.default: transparent
- button.tertiary.border.focus: {hydrophon.blau.300}

**Button Size Tokens:**

Small (32px height, compact UIs):
- button.size.small.paddingX: {spacing.3} (12px)
- button.size.small.paddingY: {spacing.1.5} (6px)
- button.size.small.fontSize: 14px (match typography.sm)
- button.size.small.minHeight: 32px
- button.size.small.iconSize: {icon.size.xs} (16px)
- button.size.small.gap: {spacing.1.5} (6px)

Medium (40px height, default):
- button.size.medium.paddingX: {spacing.4} (16px)
- button.size.medium.paddingY: {spacing.2} (8px)
- button.size.medium.fontSize: 16px (match typography.base)
- button.size.medium.minHeight: 40px
- button.size.medium.iconSize: {icon.size.sm} (20px)
- button.size.medium.gap: {spacing.2} (8px)

Large (48px height, CTAs and hero sections):
- button.size.large.paddingX: {spacing.6} (24px)
- button.size.large.paddingY: {spacing.3} (12px)
- button.size.large.fontSize: 18px (match typography.lg)
- button.size.large.minHeight: 48px
- button.size.large.iconSize: {icon.size.sm} (20px)
- button.size.large.gap: {spacing.2} (8px)

**Button Base Tokens:**
- button.borderRadius: {borderRadius.base} (4px)
- button.borderWidth: 2px
- button.fontWeight: 500 (medium)
- button.transition: 150ms ease-in-out

**Focus Indicator Tokens (WCAG 2.2 compliant):**
- button.focus.outlineWidth: 2px
- button.focus.outlineOffset: 2px
- button.focus.outlineColor: {hydrophon.blau.300}

**Icon Button Tokens:**
- button.iconOnly.small.size: 32px (width = height)
- button.iconOnly.medium.size: 44px (WCAG touch target)
- button.iconOnly.large.size: 48px

Use $description in German for all tokens. Reference Phase 1 tokens for colors, spacing, typography.
  </action>
  <verify>
- **Icon tokens pre-flight passed: icons.json exists and --icon-size-* tokens compile**
- File exists at design-system/tokens/buttons.json
- JSON is valid (no syntax errors)
- All three variants present (primary, secondary, tertiary)
- All three sizes present (small, medium, large)
- All states covered (default, hover, active, disabled, focus)
- Token references use {category.subcategory} syntax
- Icon size references ({icon.size.xs}, {icon.size.sm}) present in size tokens
- All descriptions in German
  </verify>
  <done>Button tokens define 3 variants x 3 sizes x 5 states with icon button dimensions and WCAG-compliant focus indicators, all icon token references verified</done>
</task>

<task type="auto">
  <name>Task 2: Create button documentation</name>
  <files>design-system/docs/buttons.md</files>
  <action>
Create comprehensive German button documentation (minimum 200 lines) covering:

**1. Uebersicht**
- Button hierarchy explanation: Primary > Secondary > Tertiary
- When to use each variant
- Visual distinction principles

**2. Button-Varianten (BTN-01, BTN-02, BTN-03)**

Primary Button:
- Visual: Filled background with Hydrophon Blau, white text
- Purpose: Main actions (Speichern, Absenden, Kaufen)
- Usage rule: One primary action per view/section
- States table with visual descriptions and token names:
  | State | Hintergrund | Text | Rahmen |
  |-------|-------------|------|--------|
  | Default | hydrophon.blau.500 | Weiss | transparent |
  | Hover | hydrophon.blau.600 | Weiss | transparent |
  | Active | hydrophon.blau.700 | Weiss | transparent |
  | Focus | hydrophon.blau.500 | Weiss | 2px blau.300 ring |
  | Disabled | neutral.200 | neutral.400 | transparent |

Secondary Button:
- Visual: Transparent background, brand color border and text (outline style)
- Purpose: Alternative actions (Abbrechen, Zurueck, Mehr erfahren)
- Usage rule: Complement to primary, equal visual weight to other secondaries
- States table similar to primary

Tertiary/Ghost Button:
- Visual: No background, no border, text only with subtle hover background
- Purpose: Lowest-emphasis actions (Ueberspringen, Spaeter, Details ein-/ausblenden)
- Usage rule: Use sparingly, for actions that shouldn't compete for attention
- States table similar to above

**3. Button-Groessen (BTN-04)**

Table with dimensions:
| Groesse | Hoehe | Padding | Schriftgroesse | Icon-Groesse | Anwendung |
|-------|------|---------|--------------|------------|-----------|
| Small | 32px | 6px 12px | 14px | 16px | Kompakte UIs, Tabellen |
| Medium | 40px | 8px 16px | 16px | 20px | Standard, Formulare |
| Large | 48px | 12px 24px | 18px | 20px | Hero CTAs, Marketing |

Touch target note: Medium (40px) and Large (48px) meet WCAG 44px recommendation. Small should only be used on desktop with adequate spacing.

**4. Icon-Buttons (BTN-05)**

Icon + Text Buttons:
- Icon position: left (default) or right
- Gap between icon and text: 8px (spacing.2)
- Icon size matches button size (16px/20px/20px)
- Icon uses currentColor for automatic color inheritance

Icon-Only Buttons:
- Require aria-label for accessibility
- Minimum touch target: 44x44px (small exceptions for desktop)
- Visual dimensions: 32px, 44px, 48px (icon centered)

Code examples:
```html
<!-- Icon + Text -->
<button class="button button--primary button--medium">
  <svg class="icon icon--sm" aria-hidden="true">...</svg>
  <span>Speichern</span>
</button>

<!-- Icon Only -->
<button class="button button--secondary button--icon-only" aria-label="Schliessen">
  <svg class="icon icon--md" aria-hidden="true">...</svg>
</button>
```

**5. Barrierefreiheit (WCAG AA)**

Focus Indicators:
- 2px outline with 2px offset (meets WCAG 2.2 Focus Appearance)
- 3:1 contrast between focused and unfocused state
- Never remove focus indicators

Disabled States:
- Use disabled attribute, not aria-disabled (for buttons)
- Disabled buttons exempt from contrast requirements
- Consider hiding disabled buttons when action never possible

Keyboard Navigation:
- All buttons focusable via Tab
- Activated via Enter or Space
- No additional ARIA needed for standard buttons

Touch Targets:
- Minimum 44x44px for mobile (24px with spacing exception in WCAG 2.2)
- Small buttons (32px) only for desktop with adequate surrounding space

**6. CSS Implementation Guide**

Provide CSS class structure:
```css
.button { /* base styles */ }
.button--primary { }
.button--secondary { }
.button--tertiary { }
.button--small { }
.button--medium { }
.button--large { }
.button--icon-only { }
```

Token usage examples:
```css
.button--primary {
  background-color: var(--button-primary-background-default);
  color: var(--button-primary-foreground-default);
}
.button--primary:hover:not(:disabled) {
  background-color: var(--button-primary-background-hover);
}
```

**7. Don'ts**
- Nicht: Mehrere Primary Buttons pro Bereich
- Nicht: Buttons ohne erkennbare Grenzen (ausser Tertiary)
- Nicht: Fokusindikatoren entfernen
- Nicht: Zu kleine Touch-Targets auf Mobilgeraeten
- Nicht: Animierte Groessenaenderungen bei Hover/Active (color only per CONTEXT.md)
- Nicht: Farbwerte hardcoden (immer Tokens verwenden)
  </action>
  <verify>
- File exists at design-system/docs/buttons.md
- Document has sections for all BTN requirements (01-05)
- All three variants documented with state tables
- Size table with German headers present
- Icon button patterns with code examples
- Accessibility section covering focus, disabled, touch targets
- CSS implementation guide with token references
- Minimum 200 lines of content
  </verify>
  <done>Button documentation covers primary (BTN-01), secondary (BTN-02), tertiary (BTN-03), sizes (BTN-04), and icon buttons (BTN-05) with accessibility guidelines in German</done>
</task>

<task type="auto">
  <name>Task 3: Rebuild tokens and verify integration</name>
  <files>design-system/build/css/variables.css, design-system/build/json/tokens.json</files>
  <action>
Run Style Dictionary build to generate updated CSS and JSON outputs including new button tokens:

1. Navigate to design-system directory
2. Run: npm run build
3. Verify button tokens appear in build/css/variables.css with --button- prefix
4. Verify button tokens appear in build/json/tokens.json with resolved values

Expected CSS output should include:
- --button-primary-background-default: var(--hydrophon-blau-500) or #008bd2
- --button-secondary-border-default: var(--hydrophon-blau-500) or #008bd2
- --button-tertiary-background-hover: var(--neutral-100) or #f5f5f5
- --button-size-small-min-height: 32px
- --button-size-medium-min-height: 40px
- --button-size-large-min-height: 48px
- --button-icon-only-medium-size: 44px

Verify semantic action color tokens also generated:
- --color-action-primary
- --color-action-primary-hover

**Verify icon token references resolve correctly:**
- --button-size-small-icon-size should resolve to 16px (from {icon.size.xs})
- --button-size-medium-icon-size should resolve to 20px (from {icon.size.sm})
- --button-size-large-icon-size should resolve to 20px (from {icon.size.sm})

If build fails, check that buttons.json is valid JSON and token references resolve correctly.
  </action>
  <verify>
- npm run build completes successfully (exit code 0)
- build/css/variables.css contains --button-primary-*, --button-secondary-*, --button-tertiary-*
- build/css/variables.css contains --button-size-small-*, --button-size-medium-*, --button-size-large-*
- **build/css/variables.css contains --button-size-small-icon-size: 16px (icon token reference resolved)**
- **build/css/variables.css contains --button-size-medium-icon-size: 20px (icon token reference resolved)**
- build/json/tokens.json contains button object with nested structure
- No new errors beyond expected typography composite type warnings
  </verify>
  <done>Style Dictionary build includes button tokens in CSS custom properties and JSON output with all variants, sizes, and icon token references resolved correctly</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Button tokens exist in tokens/buttons.json with valid W3C DTCG format
2. Button documentation exists in docs/buttons.md with all required sections
3. Style Dictionary build succeeds and includes button tokens
4. Token references to colors.json, spacing.json, icons.json resolve correctly
5. All three variants visually distinguishable based on token values
6. Icon size token references ({icon.size.xs}, {icon.size.sm}) compile to correct pixel values
</verification>

<success_criteria>
- BTN-01 complete: Primary button defined with all states
- BTN-02 complete: Secondary button defined with outline style
- BTN-03 complete: Tertiary/ghost button defined
- BTN-04 complete: Three button sizes defined (small, medium, large)
- BTN-05 complete: Icon buttons documented with accessibility patterns
- All tokens available as CSS custom properties
- WCAG 2.1 AA compliant focus indicators defined
- Icon token references verified and resolved correctly
</success_criteria>

<output>
After completion, create `.planning/phases/02-icons-a-basic-interactions/02-02-SUMMARY.md`
</output>
