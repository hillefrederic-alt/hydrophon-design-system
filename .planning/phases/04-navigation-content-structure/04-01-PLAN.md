---
phase: 04-navigation-content-structure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - design-system/tokens/navigation.json
  - design-system/docs/navigation/header.md
  - design-system/docs/navigation/mobile-drawer.md
autonomous: true

must_haves:
  truths:
    - "Designer kann Header-Komponente mit korrekten Tokens für Desktop (80px) und Mobile (64px) implementieren"
    - "Developer kann Hamburger-Button mit aria-expanded, aria-controls und Focus-Management umsetzen"
    - "Navigation-Links haben aktiven Zustand mit aria-current='page' für Barrierefreiheit"
    - "Mobile-Drawer hat korrekte Fokus-Verwaltung (Fokus auf Close-Button, ESC schließt, Fokus-Rückkehr)"
  artifacts:
    - path: "design-system/tokens/navigation.json"
      provides: "Vollständige Navigation-Tokens (Header, Links, Drawer)"
      contains: "navigation.header.height"
    - path: "design-system/docs/navigation/header.md"
      provides: "Desktop Header-Dokumentation mit States und Sticky-Behavior"
      min_lines: 400
    - path: "design-system/docs/navigation/mobile-drawer.md"
      provides: "Mobile Navigation-Dokumentation mit Accessibility-Patterns"
      min_lines: 350
  key_links:
    - from: "design-system/tokens/navigation.json"
      to: "design-system/docs/navigation/header.md"
      via: "Token-Referenzen in Dokumentation"
      pattern: "nav-header-height|nav-link-color"
    - from: "design-system/docs/navigation/mobile-drawer.md"
      to: "design-system/docs/navigation/header.md"
      via: "Hamburger-Button Link zum Drawer"
      pattern: "aria-controls"
---

<objective>
Erstelle das Navigation-Token-System und dokumentiere Header (Desktop) und Mobile Navigation (Hamburger + Slide-Out Drawer) mit vollständiger WCAG 2.1 AA Compliance.

Purpose: Navigation ermöglicht Nutzern die Orientierung und Bewegung durch die Website. Professionelle B2B-Navigation erfordert klare visuelle Hierarchie, responsive Patterns und barrierefreie Interaktion.

Output:
- navigation.json mit Header-, Link- und Drawer-Tokens
- header.md mit Desktop-Navigation, Sticky-Behavior, aktiven Zuständen
- mobile-drawer.md mit Hamburger-Pattern, Focus-Trap und Accessibility
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-navigation-content-structure/04-CONTEXT.md
@.planning/phases/04-navigation-content-structure/04-RESEARCH.md

# Prior phase patterns
@design-system/tokens/colors.json
@design-system/tokens/spacing.json
@design-system/tokens/typography.json
@design-system/tokens/buttons.json
@design-system/docs/buttons.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Navigation Token System erstellen</name>
  <files>design-system/tokens/navigation.json</files>
  <action>
Erstelle navigation.json mit W3C DTCG Format (wie colors.json, spacing.json):

**Header-Tokens:**
- header.height.desktop: 80px
- header.height.mobile: 64px
- header.background: {color.neutral.0} (weiß)
- header.borderBottom: 1px solid {color.neutral.200}
- header.zIndex: 100

**Navigation-Link-Tokens:**
- link.color.default: {color.neutral.700}
- link.color.hover: {color.neutral.900}
- link.color.active: {color.primary.600} (Hydrophon Blau)
- link.fontSize: {font.size.base}
- link.fontWeight.default: {font.weight.medium}
- link.fontWeight.active: {font.weight.semibold}
- link.padding: {spacing.3} {spacing.4}
- link.gap: {spacing.6} (Abstand zwischen Links)

**Active State Tokens:**
- link.activeIndicator.color: {color.primary.500}
- link.activeIndicator.height: 2px
- link.activeIndicator.position: bottom

**Focus Tokens (konsistent mit Button-System):**
- link.focus.outline.color: {color.primary.300}
- link.focus.outline.width: 2px
- link.focus.outline.offset: 2px

**Mobile Drawer-Tokens:**
- drawer.width: 280px
- drawer.maxWidth: 80vw
- drawer.background: {color.neutral.0}
- drawer.backdropColor: rgba(0, 0, 0, 0.5)
- drawer.zIndex: 1000
- drawer.transition.duration: 300ms
- drawer.padding: {spacing.6}

**Hamburger Button-Tokens:**
- toggle.size: 44px (WCAG Touch Target)
- toggle.iconSize: 24px
- toggle.color: {color.neutral.700}
- toggle.color.hover: {color.neutral.900}

Struktur folgt dem etablierten Pattern: navigation.{element}.{property}.{state}

Referenziere existierende primitive Tokens aus colors.json, spacing.json, typography.json.
  </action>
  <verify>
- JSON-Syntax gültig: `cat design-system/tokens/navigation.json | jq .`
- Enthält mindestens 25 Token-Definitionen
- Verwendet W3C DTCG Format ($value, $type)
- Referenziert existierende Tokens mit {token.path} Syntax
  </verify>
  <done>Navigation-Tokens vollständig definiert mit Header, Links, Drawer und Focus-States</done>
</task>

<task type="auto">
  <name>Task 2: Desktop Header-Dokumentation erstellen</name>
  <files>design-system/docs/navigation/header.md</files>
  <action>
Erstelle header.md auf Deutsch mit mindestens 400 Zeilen:

**Struktur (folge dem Pattern von buttons.md):**

## Übersicht
- Zweck der Header-Komponente
- B2B-Kontext: Professionell, klar, modern

## Anatomie
- Logo-Bereich (links)
- Navigation (rechts, horizontal)
- Hamburger-Button (nur mobile, verlinkt zu mobile-drawer.md)

## Varianten
- Desktop (>= 768px): Vollständige horizontale Navigation
- Tablet/Mobile (< 768px): Logo + Hamburger-Button

## Sticky-Behavior
- Desktop: position: sticky mit Shadow bei Scroll
- Mobile: Kein Sticky (Viewport-Platz sparen)
- Code-Beispiel mit CSS und JavaScript für Scroll-Detection

## Navigation-Links
### Zustände
- Default: neutral.700, medium weight
- Hover: neutral.900, dezente Transition
- Active (aktuell): primary.600, semibold, Underline-Indikator
- Focus: 2px Outline wie Button-System

### aria-current Pattern
- aria-current="page" für aktuelle Seite
- Nur EIN Element darf aria-current haben
- Server-seitig setzen (nicht JavaScript)

## Layout
- Flexbox: justify-content: space-between
- Logo left, Nav right (Standard B2B F-Pattern)
- Max-width Container (1280px) für große Bildschirme

## Tokens
- Token-Tabelle mit Namen, Werten, Beschreibungen
- CSS-Variable-Mapping

## Code-Beispiele
- Vollständiges HTML mit semantischen Elementen (header, nav, role="banner")
- CSS mit Custom Properties
- JavaScript für Scroll-Shadow (minimal)

## Barrierefreiheit
- Landmark-Region: role="banner", role="navigation"
- aria-label für Navigation
- Tastatur-Navigation: Tab durch Links
- Skip-Link Pattern (optional dokumentieren)

## Best Practices / Nicht verwenden
- Best Practices: Klare Hierarchie, max 7 Links, konsistente Benennung
- Nicht verwenden: Dropdown-Menüs, versteckte Navigation auf Desktop

Format: Markdown mit deutschen Überschriften, Code-Blöcken, Token-Tabellen.
  </action>
  <verify>
- Datei existiert: `test -f design-system/docs/navigation/header.md`
- Mindestens 400 Zeilen: `wc -l < design-system/docs/navigation/header.md`
- Enthält Token-Referenzen: `grep -c "nav-header\|navigation.header" design-system/docs/navigation/header.md`
- Enthält aria-current: `grep -c "aria-current" design-system/docs/navigation/header.md`
  </verify>
  <done>Header-Dokumentation mit Desktop-Layout, Sticky-Behavior, Navigation-States und WCAG Compliance</done>
</task>

<task type="auto">
  <name>Task 3: Mobile Navigation (Drawer) Dokumentation erstellen</name>
  <files>design-system/docs/navigation/mobile-drawer.md</files>
  <action>
Erstelle mobile-drawer.md auf Deutsch mit mindestens 350 Zeilen:

**Struktur:**

## Übersicht
- Hamburger-Menu + Slide-Out-Drawer Pattern
- Warum dieses Pattern: Standard, voll zugänglich, komplette Navigation

## Anatomie
- Hamburger-Button (Toggle)
- Drawer-Container
- Close-Button
- Navigation-Links
- Backdrop-Overlay

## Hamburger-Button
- Sizing: 44px Touch-Target (WCAG AAA)
- Icon: Lucide Menu (24px, 2px stroke)
- ARIA: aria-label="Menü öffnen", aria-expanded, aria-controls
- Nur sichtbar < 768px (Desktop: display: none)

## Drawer-Verhalten
### Öffnen
- hidden-Attribut entfernen
- aria-hidden="false" setzen
- Fokus auf Close-Button bewegen
- Fokus-Trap aktivieren

### Schließen
- hidden-Attribut setzen
- aria-hidden="true" setzen
- Fokus zurück zum Toggle-Button
- ESC-Taste schließt (Keyboard Pattern)

### Animation
- CSS Transform: translateX(-100%) → translateX(0)
- transition: transform 300ms ease-in-out
- Backdrop: opacity 0 → 1

## Focus-Trap Implementation
- Fokussierbare Elemente erfassen (a, button, input nicht disabled)
- Tab + Shift+Tab am Ende/Anfang wrappen
- Vollständiges JavaScript-Beispiel

## Navigation-Links im Drawer
- Vertikale Liste
- Größere Touch-Targets (48px Höhe)
- Gleiche Zustände wie Desktop (mit aria-current)

## Tokens
- Token-Tabelle für Drawer-spezifische Werte
- CSS-Variable-Mapping

## Code-Beispiele
### HTML
- Vollständige Drawer-Struktur mit hidden, aria-hidden
- Semantische Navigation
- Backdrop-Element

### CSS
- Position: fixed, Slide-Animation
- Backdrop-Styling
- Focus-Visible States

### JavaScript
- Toggle-Logik
- Focus-Management
- Keyboard-Handler (ESC)
- Focus-Trap-Funktion

## Barrierefreiheit
- WCAG 2.4.3: Focus Order
- WCAG 2.1.1: Keyboard accessible
- WCAG 2.1.2: No Keyboard Trap (ESC schließt)
- Screen Reader Ankündigungen

## Best Practices / Nicht verwenden
- Best Practices: Immer Focus-Management, ESC zum Schließen, Backdrop klickbar
- Nicht verwenden: display:none ohne aria-hidden, Fokus-Verlust, fehlende ESC-Unterstützung

Format: Markdown mit deutschen Überschriften, ausführliche Code-Beispiele.
  </action>
  <verify>
- Datei existiert: `test -f design-system/docs/navigation/mobile-drawer.md`
- Mindestens 350 Zeilen: `wc -l < design-system/docs/navigation/mobile-drawer.md`
- Enthält Focus-Trap: `grep -c "trapFocus\|focus-trap" design-system/docs/navigation/mobile-drawer.md`
- Enthält aria-expanded: `grep -c "aria-expanded" design-system/docs/navigation/mobile-drawer.md`
  </verify>
  <done>Mobile-Drawer-Dokumentation mit Hamburger-Pattern, Focus-Management und Accessibility</done>
</task>

</tasks>

<verification>
Nach Abschluss aller Tasks:
1. navigation.json ist valides JSON mit 25+ Tokens
2. header.md hat 400+ Zeilen mit Sticky-Pattern und aria-current
3. mobile-drawer.md hat 350+ Zeilen mit Focus-Trap und ESC-Handler
4. Alle Dokumentationen referenzieren die Navigation-Tokens
5. ARIA-Attribute sind vollständig dokumentiert (aria-current, aria-expanded, aria-controls, aria-label)
</verification>

<success_criteria>
- Navigation-Token-System vollständig mit Header, Links, Drawer, Focus
- Desktop-Header-Dokumentation mit Sticky-Behavior und Navigation-States
- Mobile-Drawer-Dokumentation mit Accessibility-Patterns
- Konsistente Token-Referenzen zwischen JSON und Markdown
- Deutsche Dokumentation für Zielgruppe
</success_criteria>

<output>
Nach Abschluss: `.planning/phases/04-navigation-content-structure/04-01-SUMMARY.md` erstellen mit:
- Frontmatter (phase, plan, subsystem, tags, requires, provides, affects, tech-stack, key-files, key-decisions, patterns-established, duration, completed)
- Zusammenfassung der Accomplishments
- Navigation-Token-Übersicht
- Decisions (Logo left + Nav right, Desktop-only Sticky, etc.)
</output>
