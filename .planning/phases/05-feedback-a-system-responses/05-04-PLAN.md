---
phase: 05-feedback-a-system-responses
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - design-system/tokens/feedback.json
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "User can access contextual help via tooltips with consistent styling"
    - "User receives confirmation when action completes successfully via styled toasts"
    - "All four toast variants (success, info, warning, error) have distinct visual styling"
    - "Tooltip CSS variables are generated by Style Dictionary build"
    - "Toast CSS variables are generated by Style Dictionary build"
  artifacts:
    - path: "design-system/tokens/feedback.json"
      provides: "Tooltip and toast tokens in W3C DTCG format"
      contains: "tooltip"
    - path: "design-system/tokens/feedback.json"
      provides: "Semantic color scales for toast variants"
      contains: "toast"
    - path: "design-system/build/css/variables.css"
      provides: "Generated CSS custom properties"
      contains: "--tooltip-|--toast-"
  key_links:
    - from: "design-system/docs/feedback/tooltip.md"
      to: "design-system/tokens/feedback.json"
      via: "Token references"
      pattern: "tooltip\\."
    - from: "design-system/docs/feedback/toast.md"
      to: "design-system/tokens/feedback.json"
      via: "Token references"
      pattern: "toast\\."
---

<objective>
Add missing tooltip and toast tokens to feedback.json that the documentation already references.

Purpose: The tooltip.md and toast.md documentation reference CSS variables (--tooltip-*, --toast-*) that don't exist in the token system. This gap closure adds the tokens to make the documentation accurate and enable developer implementation.

Output: Complete feedback.json with tooltip and toast tokens, rebuilt CSS variables
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/05-feedback-a-system-responses/05-VERIFICATION.md
@design-system/tokens/feedback.json
@design-system/docs/feedback/tooltip.md
@design-system/docs/feedback/toast.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add tooltip tokens to feedback.json</name>
  <files>design-system/tokens/feedback.json</files>
  <action>
**Pre-check:** Verify base token aliases exist before adding tooltip tokens:
- {neutral.900} - exists in colors.json
- {neutral.white} - exists in colors.json
- {fontSize.sm} - exists in typography.json (14px)
- {spacing.2} - exists in spacing.json (8px)
- {spacing.1} - exists in spacing.json (4px)
- {borderRadius.sm} - exists in effects.json (2px)

Add tooltip tokens to feedback.json after the existing skeleton section. These tokens match what tooltip.md documentation already references.

Add this tooltip section:

```json
"tooltip": {
  "delay": {
    "$value": "300ms",
    "$type": "duration",
    "$description": "Verzoegerung vor dem Anzeigen (300ms Industry-Standard)"
  },
  "background": {
    "$value": "{neutral.900}",
    "$type": "color",
    "$description": "Dunkler Hintergrund fuer hohen Kontrast"
  },
  "color": {
    "$value": "{neutral.white}",
    "$type": "color",
    "$description": "Weisser Text auf dunklem Hintergrund"
  },
  "font-size": {
    "$value": "{fontSize.sm}",
    "$type": "dimension",
    "$description": "Kleine Schriftgroesse - 14px"
  },
  "padding": {
    "x": {
      "$value": "{spacing.2}",
      "$type": "dimension",
      "$description": "Horizontaler Innenabstand - 8px"
    },
    "y": {
      "$value": "{spacing.1}",
      "$type": "dimension",
      "$description": "Vertikaler Innenabstand - 4px"
    }
  },
  "border-radius": {
    "$value": "{borderRadius.sm}",
    "$type": "dimension",
    "$description": "Leichte Rundung - 2px"
  },
  "max-width": {
    "$value": "200px",
    "$type": "dimension",
    "$description": "Maximale Breite vor Umbruch"
  },
  "arrow": {
    "size": {
      "$value": "6px",
      "$type": "dimension",
      "$description": "Groesse des Pfeil-Indikators"
    }
  },
  "offset": {
    "$value": "5px",
    "$type": "dimension",
    "$description": "Abstand zum Trigger-Element"
  },
  "z-index": {
    "$value": "1100",
    "$type": "number",
    "$description": "Positionierung ueber Modals (1000)"
  },
  "animation": {
    "duration": {
      "$value": "150ms",
      "$type": "duration",
      "$description": "Ein-/Ausblend-Animation - schnell, nicht stoerend"
    }
  }
}
```

Ensure valid JSON by placing a comma after the closing brace of the skeleton section.
  </action>
  <verify>
1. grep -q '"tooltip":' design-system/tokens/feedback.json (section exists)
2. grep -q '"tooltip-background"' design-system/tokens/feedback.json (key property exists)
3. grep -q '{neutral.900}' design-system/tokens/feedback.json (alias resolves)
4. grep -q '{fontSize.sm}' design-system/tokens/feedback.json (alias resolves)
5. grep -q '{borderRadius.sm}' design-system/tokens/feedback.json (alias resolves)
</verify>
  <done>Tooltip tokens exist in feedback.json with all properties matching documentation references, all token aliases verified to exist in base token system</done>
</task>

<task type="auto">
  <name>Task 2: Add toast tokens to feedback.json</name>
  <files>design-system/tokens/feedback.json</files>
  <action>
**IMPORTANT:** The token system does NOT have semantic color scales (color.success.50, color.info.200, etc.). Only single semantic colors exist (color.success = #22c55e, etc.). Toast variant colors MUST use direct hex values based on Tailwind color scales.

Add toast tokens to feedback.json after the tooltip section. Use direct color values for variant-specific colors.

Add this toast section:

```json
"toast": {
  "position": {
    "top": {
      "$value": "{spacing.4}",
      "$type": "dimension",
      "$description": "Abstand vom oberen Bildschirmrand - 16px"
    },
    "right": {
      "$value": "{spacing.4}",
      "$type": "dimension",
      "$description": "Abstand vom rechten Bildschirmrand - 16px"
    }
  },
  "width": {
    "$value": "360px",
    "$type": "dimension",
    "$description": "Standardbreite fuer Toasts"
  },
  "max-width": {
    "$value": "calc(100vw - 32px)",
    "$type": "dimension",
    "$description": "Responsive maximale Breite"
  },
  "padding": {
    "x": {
      "$value": "{spacing.4}",
      "$type": "dimension",
      "$description": "Horizontaler Innenabstand - 16px"
    },
    "y": {
      "$value": "{spacing.3}",
      "$type": "dimension",
      "$description": "Vertikaler Innenabstand - 12px"
    }
  },
  "border-radius": {
    "$value": "{borderRadius.lg}",
    "$type": "dimension",
    "$description": "Eckenradius - 8px"
  },
  "shadow": {
    "$value": "{shadow.lg}",
    "$type": "shadow",
    "$description": "Schatten fuer Elevation"
  },
  "gap": {
    "$value": "{spacing.3}",
    "$type": "dimension",
    "$description": "Abstand zwischen Icon und Text - 12px"
  },
  "stack-gap": {
    "$value": "{spacing.2}",
    "$type": "dimension",
    "$description": "Abstand zwischen gestapelten Toasts - 8px"
  },
  "max-visible": {
    "$value": "4",
    "$type": "number",
    "$description": "Maximale Anzahl gleichzeitig sichtbar"
  },
  "z-index": {
    "$value": "1200",
    "$type": "number",
    "$description": "Z-Index ueber Tooltips (1100)"
  },
  "duration": {
    "success": {
      "$value": "3000ms",
      "$type": "duration",
      "$description": "Auto-Dismiss nach 3 Sekunden"
    },
    "info": {
      "$value": "4000ms",
      "$type": "duration",
      "$description": "Auto-Dismiss nach 4 Sekunden"
    },
    "warning": {
      "$value": "5000ms",
      "$type": "duration",
      "$description": "Auto-Dismiss nach 5 Sekunden"
    },
    "error": {
      "$value": "0ms",
      "$type": "duration",
      "$description": "Bleibt bis manuell geschlossen"
    }
  },
  "animation": {
    "enter-duration": {
      "$value": "200ms",
      "$type": "duration",
      "$description": "Einblend-Animation"
    },
    "exit-duration": {
      "$value": "150ms",
      "$type": "duration",
      "$description": "Ausblend-Animation"
    }
  },
  "variant": {
    "success": {
      "background": {
        "$value": "#f0fdf4",
        "$type": "color",
        "$description": "Hellgruener Hintergrund (green-50)"
      },
      "border": {
        "$value": "#bbf7d0",
        "$type": "color",
        "$description": "Gruener Rahmen (green-200)"
      },
      "icon-color": {
        "$value": "#16a34a",
        "$type": "color",
        "$description": "Gruenes Icon (green-600)"
      },
      "text-color": {
        "$value": "#166534",
        "$type": "color",
        "$description": "Dunkelgruener Text (green-800)"
      }
    },
    "info": {
      "background": {
        "$value": "#eff6ff",
        "$type": "color",
        "$description": "Hellblauer Hintergrund (blue-50)"
      },
      "border": {
        "$value": "#bfdbfe",
        "$type": "color",
        "$description": "Blauer Rahmen (blue-200)"
      },
      "icon-color": {
        "$value": "#2563eb",
        "$type": "color",
        "$description": "Blaues Icon (blue-600)"
      },
      "text-color": {
        "$value": "#1e40af",
        "$type": "color",
        "$description": "Dunkelblauer Text (blue-800)"
      }
    },
    "warning": {
      "background": {
        "$value": "#fffbeb",
        "$type": "color",
        "$description": "Hellgelber Hintergrund (amber-50)"
      },
      "border": {
        "$value": "#fde68a",
        "$type": "color",
        "$description": "Gelber Rahmen (amber-200)"
      },
      "icon-color": {
        "$value": "#d97706",
        "$type": "color",
        "$description": "Gelbes Icon (amber-600)"
      },
      "text-color": {
        "$value": "#92400e",
        "$type": "color",
        "$description": "Dunkelgelber Text (amber-800)"
      }
    },
    "error": {
      "background": {
        "$value": "#fef2f2",
        "$type": "color",
        "$description": "Hellroter Hintergrund (red-50)"
      },
      "border": {
        "$value": "#fecaca",
        "$type": "color",
        "$description": "Roter Rahmen (red-200)"
      },
      "icon-color": {
        "$value": "#dc2626",
        "$type": "color",
        "$description": "Rotes Icon (red-600)"
      },
      "text-color": {
        "$value": "#991b1b",
        "$type": "color",
        "$description": "Dunkelroter Text (red-800)"
      }
    }
  },
  "action": {
    "font-size": {
      "$value": "{fontSize.sm}",
      "$type": "dimension",
      "$description": "Schriftgroesse fuer Aktions-Buttons - 14px"
    },
    "font-weight": {
      "$value": "{fontWeight.medium}",
      "$type": "fontWeight",
      "$description": "Schriftgewicht fuer Aktions-Buttons"
    }
  },
  "close-button": {
    "size": {
      "$value": "24px",
      "$type": "dimension",
      "$description": "Groesse des Schliessen-Buttons"
    },
    "icon-size": {
      "$value": "16px",
      "$type": "dimension",
      "$description": "Groesse des X-Icons"
    }
  }
}
```

Ensure valid JSON by placing a comma after the closing brace of the tooltip section.
  </action>
  <verify>
1. grep -q '"toast":' design-system/tokens/feedback.json (section exists)
2. grep -q '"variant":' design-system/tokens/feedback.json (variant subsection exists)
3. grep -q '#f0fdf4' design-system/tokens/feedback.json (success background color)
4. grep -q '#eff6ff' design-system/tokens/feedback.json (info background color)
5. grep -q '#fffbeb' design-system/tokens/feedback.json (warning background color)
6. grep -q '#fef2f2' design-system/tokens/feedback.json (error background color)
</verify>
  <done>Toast tokens exist in feedback.json with direct hex color values for all four variants (success, info, warning, error)</done>
</task>

<task type="auto">
  <name>Task 3: Rebuild CSS variables with Style Dictionary</name>
  <files>design-system/build/css/variables.css, design-system/build/json/tokens.json</files>
  <action>
Run Style Dictionary build to generate CSS custom properties from the updated feedback.json.

```bash
cd design-system && npm run build
```

After build completes, verify the new variables exist:
- Check for --tooltip-* variables in build/css/variables.css
- Check for --toast-* variables in build/css/variables.css
- Validate JSON output in build/json/tokens.json contains tooltip and toast

Expected new CSS variables include:
- --tooltip-delay, --tooltip-background, --tooltip-color, --tooltip-font-size
- --tooltip-padding-x, --tooltip-padding-y, --tooltip-border-radius
- --tooltip-max-width, --tooltip-arrow-size, --tooltip-offset
- --tooltip-z-index, --tooltip-animation-duration
- --toast-position-top, --toast-position-right, --toast-width
- --toast-padding-x, --toast-padding-y, --toast-border-radius
- --toast-gap, --toast-stack-gap, --toast-max-visible, --toast-z-index
- --toast-duration-success, --toast-duration-info, --toast-duration-warning, --toast-duration-error
- --toast-variant-success-background, --toast-variant-success-border, etc.
  </action>
  <verify>
Verify specific CSS variable generation with exact variable names:

**Tooltip variables (all must exist):**
1. grep -q '\-\-tooltip-background:' design-system/build/css/variables.css
2. grep -q '\-\-tooltip-color:' design-system/build/css/variables.css
3. grep -q '\-\-tooltip-font-size:' design-system/build/css/variables.css
4. grep -q '\-\-tooltip-delay:' design-system/build/css/variables.css
5. grep -q '\-\-tooltip-border-radius:' design-system/build/css/variables.css

**Toast variables (all must exist):**
1. grep -q '\-\-toast-width:' design-system/build/css/variables.css
2. grep -q '\-\-toast-z-index:' design-system/build/css/variables.css
3. grep -q '\-\-toast-variant-success-background:' design-system/build/css/variables.css
4. grep -q '\-\-toast-variant-info-background:' design-system/build/css/variables.css
5. grep -q '\-\-toast-variant-warning-background:' design-system/build/css/variables.css
6. grep -q '\-\-toast-variant-error-background:' design-system/build/css/variables.css

Run all grep checks - all must return success (exit 0).
</verify>
  <done>CSS variables contain --tooltip-* and --toast-* properties with all variant colors, matching documentation expectations. Documentation references to CSS variables will now resolve correctly.</done>
</task>

</tasks>

<verification>
1. feedback.json contains tooltip, toast, modal, spinner, progress, skeleton sections (6 total)
2. Style Dictionary build succeeds without errors
3. variables.css contains --tooltip-delay, --tooltip-background, --tooltip-color
4. variables.css contains --toast-position-top, --toast-width, --toast-duration-success
5. variables.css contains --toast-variant-success-background through all four variants
6. Documentation CSS variable references now match actual build output
</verification>

<success_criteria>
- Tooltip tokens match all references in tooltip.md (12 token groups)
- Toast tokens match all references in toast.md (position, sizing, timing, variants, action, close-button)
- Style Dictionary build produces CSS variables that documentation already references
- No broken token references remain between documentation and build output
</success_criteria>

<output>
After completion, create `.planning/phases/05-feedback-a-system-responses/05-04-SUMMARY.md`
</output>
