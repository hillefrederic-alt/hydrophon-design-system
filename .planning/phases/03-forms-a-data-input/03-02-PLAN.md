---
phase: 03-forms-a-data-input
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - design-system/tokens/forms.json
  - design-system/docs/forms/checkbox.md
  - design-system/docs/forms/radio-button.md
autonomous: true

must_haves:
  truths:
    - "Benutzer kann Checkboxen mit Maus oder Tastatur (Space) umschalten"
    - "Benutzer kann Radio Buttons mit Pfeiltasten innerhalb einer Gruppe wechseln"
    - "Benutzer erkennt fokussierte Checkbox/Radio durch sichtbaren 2px Outline"
    - "Benutzer sieht blaues Checkmark/Dot bei ausgewaehlten Optionen"
    - "Screenreader-Nutzer hoeren korrekte Ansage (checkbox, checked/not checked)"
  artifacts:
    - path: "design-system/tokens/forms.json"
      provides: "Checkbox/Radio Token-Erweiterungen"
      contains: "checkbox.checked.background"
    - path: "design-system/docs/forms/checkbox.md"
      provides: "Checkbox Dokumentation mit Custom-Styling-Pattern"
      min_lines: 150
    - path: "design-system/docs/forms/radio-button.md"
      provides: "Radio Button Dokumentation mit Gruppen-Pattern"
      min_lines: 150
  key_links:
    - from: "forms.json checkbox tokens"
      to: "colors.json"
      via: "Token-Referenzen"
      pattern: "\\{hydrophon\\.blau"
    - from: "checkbox/radio docs"
      to: "icons.md"
      via: "Check-Icon Referenz"
      pattern: "Check|check"
---

<objective>
Erstelle die Design-Token-Erweiterungen und Dokumentation fuer Checkbox (FORM-04) und Radio Button (FORM-05) mit native-first Accessibility-Pattern.

Purpose: Liefert visuell custom gestaltete Auswahl-Komponenten die native HTML-Semantik beibehalten (opacity:0 Technik statt display:none). Ermoeglicht Screenreader-Kompatibilitaet und native Tastaturnavigation.

Output: Token-Erweiterungen in forms.json und deutsche Markdown-Dokumentation fuer beide Komponenten.
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-forms-a-data-input/03-CONTEXT.md
@.planning/phases/03-forms-a-data-input/03-RESEARCH.md
@.planning/phases/03-forms-a-data-input/03-01-SUMMARY.md
@.planning/phases/02-icons-a-basic-interactions/02-01-SUMMARY.md

Referenz-Dateien:
@design-system/tokens/colors.json
@design-system/tokens/forms.json
@design-system/tokens/icons.json
@design-system/docs/icons.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Checkbox und Radio Token-Erweiterungen</name>
  <files>design-system/tokens/forms.json</files>
  <action>
Erweitere `design-system/tokens/forms.json` um Checkbox- und Radio-Button-Tokens.

**WICHTIG:** forms.json existiert bereits aus Plan 03-01. Ergaenze die bestehende Struktur mit den neuen Tokens.

**1. Checkbox-Tokens:**
```
checkbox.size.default: 20px
checkbox.size.large: 24px

checkbox.borderRadius: 4px
checkbox.borderWidth: 2px

checkbox.background.default: {neutral.white}
checkbox.background.hover: {neutral.white}
checkbox.background.checked: {hydrophon.blau.500}
checkbox.background.checkedHover: {hydrophon.blau.600}
checkbox.background.disabled: {neutral.50}
checkbox.background.checkedDisabled: {neutral.300}

checkbox.border.default: {neutral.300}
checkbox.border.hover: {neutral.400}
checkbox.border.checked: {hydrophon.blau.500}
checkbox.border.focus: {hydrophon.blau.500}
checkbox.border.error: {color.error}
checkbox.border.disabled: {neutral.200}

checkbox.icon.color: {neutral.white}
checkbox.icon.size: 14px

checkbox.focus.outlineWidth: 2px
checkbox.focus.outlineOffset: 2px
checkbox.focus.outlineColor: {hydrophon.blau.300}

checkbox.label.gap: {spacing.2}
checkbox.label.color: {neutral.700}
checkbox.label.colorDisabled: {neutral.400}
```

**2. Radio-Button-Tokens:**
```
radio.size.default: 20px
radio.size.large: 24px

radio.borderRadius: 50%
radio.borderWidth: 2px

radio.background.default: {neutral.white}
radio.background.hover: {neutral.white}
radio.background.checked: {hydrophon.blau.500}
radio.background.checkedHover: {hydrophon.blau.600}
radio.background.disabled: {neutral.50}
radio.background.checkedDisabled: {neutral.300}

radio.border.default: {neutral.300}
radio.border.hover: {neutral.400}
radio.border.checked: {hydrophon.blau.500}
radio.border.focus: {hydrophon.blau.500}
radio.border.error: {color.error}
radio.border.disabled: {neutral.200}

radio.dot.size: 10px (50% der Gesamtgroesse)
radio.dot.sizeLarge: 12px
radio.dot.color: {neutral.white}

radio.focus.outlineWidth: 2px
radio.focus.outlineOffset: 2px
radio.focus.outlineColor: {hydrophon.blau.300}

radio.label.gap: {spacing.2}
radio.label.color: {neutral.700}
radio.label.colorDisabled: {neutral.400}

radio.group.gap: {spacing.3}
radio.group.orientation: vertical (default), horizontal
```

Alle Tokens mit deutschen $description-Texten.
  </action>
  <verify>
- forms.json existiert: `ls design-system/tokens/forms.json`
- Checkbox-Tokens vorhanden: `grep -c "checkbox" design-system/tokens/forms.json`
- Radio-Tokens vorhanden: `grep -c "radio" design-system/tokens/forms.json`
- JSON valide: `cat design-system/tokens/forms.json | python3 -m json.tool > /dev/null && echo "Valid JSON"`
  </verify>
  <done>
forms.json enthaelt vollstaendige Checkbox- und Radio-Token-Definitionen mit allen Zustaenden (default, hover, checked, disabled, error, focus).
  </done>
</task>

<task type="auto">
  <name>Task 2: Checkbox Dokumentation erstellen</name>
  <files>design-system/docs/forms/checkbox.md</files>
  <action>
Erstelle `design-system/docs/forms/checkbox.md` (deutsche Dokumentation):

**Struktur:**

```markdown
# Checkbox

Ermoeglicht Auswahl von einer oder mehreren Optionen aus einer Liste.

## Uebersicht

### Anatomie
- Native Input (visuell versteckt, accessibility erhalten)
- Custom Visual (gestylter Container)
- Check-Icon (Lucide Check, 14px)
- Label-Text
- Helper Text (optional)
- Error Message (optional)

### Verwendung
- Mehrfachauswahl in Formularen
- Einverstaendniserklaerungen (AGB, Datenschutz)
- Filter und Einstellungen
- Todo-Listen

## Groessen

### Default (20px)
- Checkbox: 20x20px
- Icon: 14px
- Standard fuer Formulare

### Large (24px)
- Checkbox: 24x24px
- Icon: 16px
- Mobile-optimiert

## Zustaende

### Unchecked Default
- Background: neutral.white
- Border: neutral.300 (2px)

### Unchecked Hover
- Border: neutral.400

### Checked
- Background: hydrophon.blau.500
- Border: hydrophon.blau.500
- Icon: weisses Checkmark (Check aus Lucide)

### Checked Hover
- Background: hydrophon.blau.600

### Focus
- Outline: 2px hydrophon.blau.300
- Offset: 2px
- Nur bei :focus-visible (Tastatur)

### Error
- Border: color.error
- Error-Message unter der Checkbox-Gruppe

### Disabled (Unchecked)
- Background: neutral.50
- Border: neutral.200
- Label: neutral.400
- cursor: not-allowed

### Disabled (Checked)
- Background: neutral.300
- Border: neutral.300
- Icon: weiss (reduzierter Kontrast)

## Custom-Styling-Pattern

### Accessibility-konformes Verstecken

```css
/* RICHTIG: opacity:0 behaelt Accessibility */
.checkbox-native {
  opacity: 0;
  position: absolute;
  width: 1px;
  height: 1px;
}

/* FALSCH: display:none entfernt aus Accessibility Tree */
.checkbox-native {
  display: none; /* NIEMALS! */
}
```

### Focus-Weiterleitung

```css
/* Focus auf nativem Input stylt Custom Visual */
.checkbox-native:focus-visible + .checkbox-custom {
  outline: 2px solid var(--checkbox-focus-outline-color);
  outline-offset: 2px;
}

/* Checked-State */
.checkbox-native:checked + .checkbox-custom {
  background-color: var(--checkbox-background-checked);
  border-color: var(--checkbox-border-checked);
}
```

## Accessibility

### WCAG Anforderungen
- 4.1.2 Name, Rolle, Wert: Native input behaelt Checkbox-Rolle
- 2.4.7 Focus sichtbar: :focus-visible mit 2px Outline
- 1.4.3 Kontrast: 4.5:1 fuer Text, 3:1 fuer UI-Komponenten
- 3.3.2 Labels: Sichtbares Label fuer jede Checkbox

### Native Vorteile
- Space-Taste toggled automatisch
- Screenreader kuendigt "checkbox, not checked" an
- Formular-Validation API funktioniert
- Keine ARIA-Attribute noetig

### HTML-Struktur
- `<label>` umschliesst Input und Text
- `<input type="checkbox">` bleibt im DOM
- aria-describedby fuer Helper/Error Text

## Checkbox-Gruppe

### Mit Fieldset/Legend
```html
<fieldset>
  <legend>Interessen auswaehlen</legend>
  <label><input type="checkbox" /> Option 1</label>
  <label><input type="checkbox" /> Option 2</label>
</fieldset>
```

### Fehler bei Gruppen
- Error-Message unter der gesamten Gruppe
- aria-describedby auf fieldset oder erste Checkbox

## Code-Beispiel

[Vollstaendiges HTML + CSS Beispiel]

## Design Tokens

[Tabelle aller checkbox.* Token-Namen und Werte]

## Anti-Patterns

### Vermeiden
- display: none fuer natives Input
- Nur div mit onClick ohne Checkbox-Semantik
- Fehlender Focus-Indikator
- Nur Farbe zur Unterscheidung checked/unchecked
```

Mindestens 150 Zeilen, deutsche Sprache.
  </action>
  <verify>
- Datei existiert: `ls design-system/docs/forms/checkbox.md`
- Mindestens 150 Zeilen: `wc -l design-system/docs/forms/checkbox.md`
- Enthaelt opacity:0 Pattern: grep fuer "opacity"
- Enthaelt Anti-Pattern Warnung: grep fuer "display: none" oder "NIEMALS"
  </verify>
  <done>
checkbox.md dokumentiert vollstaendig: Custom-Styling mit native Semantik, opacity:0 Technik, alle Zustaende, Accessibility-Anforderungen, Anti-Patterns.
  </done>
</task>

<task type="auto">
  <name>Task 3: Radio Button Dokumentation erstellen</name>
  <files>design-system/docs/forms/radio-button.md</files>
  <action>
Erstelle `design-system/docs/forms/radio-button.md` (deutsche Dokumentation):

**Struktur:**

```markdown
# Radio Button

Ermoeglicht Auswahl genau einer Option aus einer Gruppe.

## Uebersicht

### Anatomie
- Native Input (visuell versteckt)
- Custom Visual (Kreis mit innerem Punkt bei Auswahl)
- Label-Text
- Optional: Helper Text pro Option
- Optional: Error Message fuer Gruppe

### Verwendung
- Exklusive Auswahl (nur eine Option moeglich)
- Zahlungsmethoden
- Versandoptionen
- Einstellungen mit mutuell exklusiven Werten

### Unterschied zu Checkbox
- Radio: Exakt eine Auswahl in Gruppe
- Checkbox: Null, eine oder mehrere Auswahlen

## Groessen

### Default (20px)
- Radio: 20x20px Kreis
- Inner Dot: 10px

### Large (24px)
- Radio: 24x24px
- Inner Dot: 12px
- Mobile-optimiert

## Zustaende

[Analog zu Checkbox: Default, Hover, Selected, Selected Hover, Focus, Error, Disabled]

### Selected (statt Checked)
- Background: hydrophon.blau.500
- Border: hydrophon.blau.500
- Inner Dot: weisser Kreis (50% der Groesse)

## Radio-Gruppe

### Tastaturnavigation (native)
- Tab: Fokussiert aktive/erste Radio in Gruppe
- Pfeiltasten: Wechselt Auswahl innerhalb Gruppe
- Space: Waehlt fokussierte Option aus

### Fieldset-Pattern
```html
<fieldset>
  <legend>Versandart waehlen <span aria-label="Pflichtfeld">*</span></legend>
  <label><input type="radio" name="shipping" value="standard" /> Standard</label>
  <label><input type="radio" name="shipping" value="express" /> Express</label>
</fieldset>
```

### Orientierung
- Vertikal (Standard): Optionen untereinander
- Horizontal: Optionen nebeneinander (max 3-4 Optionen)

## Custom-Styling-Pattern

[Gleiche Technik wie Checkbox: opacity:0, :focus-visible, :checked Pseudo-Klassen]

## Accessibility

### WCAG Anforderungen
- 4.1.2: Native radio input behaelt Rolle
- 2.4.3 Focus-Reihenfolge: Tab wechselt zwischen Gruppen, Pfeile innerhalb
- 3.3.2: Legend beschreibt Gruppe, Labels beschreiben Optionen

### Native Keyboard-Patterns
Radios innerhalb einer Gruppe (gleicher name) haben spezielle Navigation:
- Erste Tab: Fokussiert aktuell ausgewaehlte oder erste Radio
- Pfeil hoch/runter: Wechselt und waehlt naechste Option
- Pfeil links/rechts: Wie hoch/runter (horizontal Gruppen)
- Diese Navigation funktioniert NUR mit nativen `<input type="radio">`

## Error-Handling

### Pflichtfeld-Validierung
- Error wenn keine Option gewaehlt bei Submit
- Error-Message unter der Gruppe
- aria-describedby auf fieldset

### Styling bei Error
- Border aller Radios: color.error
- Error-Icon + Message unter Legend

## Code-Beispiel

[HTML + CSS Beispiel mit Gruppe]

## Design Tokens

[Tabelle aller radio.* Token-Namen]

## Anti-Patterns

- Custom div-Radios ohne native input: Verliert Pfeil-Navigation
- Einzelne Radio ohne Gruppe: Kann nicht abgewaehlt werden
- Fehlende Legend fuer Gruppe
```

Mindestens 150 Zeilen, deutsche Sprache.
  </action>
  <verify>
- Datei existiert: `ls design-system/docs/forms/radio-button.md`
- Mindestens 150 Zeilen: `wc -l design-system/docs/forms/radio-button.md`
- Enthaelt Gruppen-Pattern: grep fuer "fieldset" oder "Gruppe"
- Enthaelt Tastaturnavigation: grep fuer "Pfeil" oder "Arrow"
  </verify>
  <done>
radio-button.md dokumentiert vollstaendig: Gruppen-Pattern mit fieldset/legend, native Tastaturnavigation, alle Zustaende, Unterschied zu Checkbox, Accessibility.
  </done>
</task>

</tasks>

<verification>
Nach Abschluss aller Tasks:
1. forms.json enthaelt checkbox.* und radio.* Token-Namespaces
2. Dokumentations-Verzeichnis: design-system/docs/forms/ enthaelt checkbox.md und radio-button.md
3. Beide Dokumentationen erklaeren opacity:0 Pattern vs display:none
4. Radio-Dokumentation erklaert Gruppen-Tastaturnavigation
</verification>

<success_criteria>
- forms.json erweitert um Checkbox-Tokens (Groessen, Zustaende, Focus, Icon)
- forms.json erweitert um Radio-Tokens (Groessen, Zustaende, Dot, Gruppe)
- checkbox.md: 150+ Zeilen, opacity:0 Pattern, Anti-Pattern-Warnungen
- radio-button.md: 150+ Zeilen, Gruppen-Pattern, native Keyboard-Navigation
- Alle Dokumentation in deutscher Sprache
</success_criteria>

<output>
Nach Abschluss: `.planning/phases/03-forms-a-data-input/03-02-SUMMARY.md` erstellen
</output>
