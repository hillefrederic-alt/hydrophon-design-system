---
phase: 03-forms-a-data-input
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - design-system/tokens/forms.json
  - design-system/docs/forms/text-input.md
  - design-system/docs/forms/textarea.md
  - design-system/docs/forms/select.md
autonomous: true

must_haves:
  truths:
    - "Benutzer sieht visuelles Feedback beim Hovern ueber ein Eingabefeld"
    - "Benutzer erkennt sofort welches Feld gerade fokussiert ist (sichtbarer 2px Outline)"
    - "Benutzer erkennt fehlerhafte Eingaben durch rote Umrandung und Icon"
    - "Benutzer kann deaktivierte Felder visuell von aktiven unterscheiden"
    - "Benutzer kann zwischen Small, Medium und Large Eingabefeldern waehlen"
  artifacts:
    - path: "design-system/tokens/forms.json"
      provides: "Alle Form-Token-Definitionen fuer Input, Textarea, Select"
      contains: "input.field.border.focus"
    - path: "design-system/docs/forms/text-input.md"
      provides: "Text Input Dokumentation mit allen Zustaenden"
      min_lines: 200
    - path: "design-system/docs/forms/textarea.md"
      provides: "Textarea Dokumentation"
      min_lines: 100
    - path: "design-system/docs/forms/select.md"
      provides: "Select/Dropdown Dokumentation"
      min_lines: 150
  key_links:
    - from: "forms.json"
      to: "colors.json"
      via: "Token-Referenzen"
      pattern: "\\{color\\."
    - from: "forms.json"
      to: "spacing.json"
      via: "Spacing-Referenzen"
      pattern: "\\{spacing\\."
    - from: "forms.json"
      to: "buttons.json"
      via: "Konsistente Hoehen"
      pattern: "32px|40px|48px"
---

<objective>
Erstelle das Foundation-Token-System fuer alle Form-Komponenten und die Dokumentation fuer Text Input (FORM-01), Textarea (FORM-02) und Select/Dropdown (FORM-03).

Purpose: Etabliert die Design-Token-Basis fuer konsistente Formular-Gestaltung mit WCAG 2.1 AA Compliance und Integration mit bestehendem Button-System (gleiche Hoehen: 32/40/48px).

Output: forms.json Token-Datei und deutsche Markdown-Dokumentation fuer drei Eingabe-Komponenten.
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-forms-a-data-input/03-CONTEXT.md
@.planning/phases/03-forms-a-data-input/03-RESEARCH.md
@.planning/phases/02-icons-a-basic-interactions/02-02-SUMMARY.md

Referenz-Dateien aus vorherigen Phasen:
@design-system/tokens/colors.json
@design-system/tokens/buttons.json
@design-system/tokens/spacing.json
@design-system/tokens/icons.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Form Design Tokens erstellen</name>
  <files>design-system/tokens/forms.json</files>
  <action>
Erstelle `design-system/tokens/forms.json` im W3C DTCG Format mit:

**1. Input-Groessen-Tokens (konsistent mit Button-System):**
```
input.height.sm: 32px
input.height.md: 40px
input.height.lg: 48px
input.padding.x.sm: {spacing.2} (8px)
input.padding.x.md: {spacing.3} (12px)
input.padding.x.lg: {spacing.4} (16px)
input.font.size.sm: 14px
input.font.size.md: 16px
input.font.size.lg: 18px
```

**2. Outline-Stil Input-Field-Tokens (5 Zustaende):**
```
input.field.background.default: {neutral.white}
input.field.background.hover: {neutral.white}
input.field.background.focus: {neutral.white}
input.field.background.error: {neutral.white}
input.field.background.success: {neutral.white}
input.field.background.disabled: {neutral.50}

input.field.border.default: {neutral.300}
input.field.border.hover: {neutral.400}
input.field.border.focus: {hydrophon.blau.500}
input.field.border.error: {color.error}
input.field.border.success: {color.success}
input.field.border.disabled: {neutral.200}

input.field.borderWidth.default: 1px
input.field.borderWidth.focus: 2px

input.field.text.default: {neutral.900}
input.field.text.placeholder: {neutral.400}
input.field.text.disabled: {neutral.600}
```

**3. Focus-Ring-Tokens (WCAG 2.2 konform):**
```
input.focus.ring.color: {hydrophon.blau.100}
input.focus.ring.width: 3px
input.focus.outline.width: 2px
input.focus.outline.offset: 0px
```

**4. Label-Tokens:**
```
input.label.color.default: {neutral.700}
input.label.color.error: {color.error}
input.label.fontSize: 14px (font.size.sm)
input.label.fontWeight: 500
input.label.marginBottom: {spacing.2}
```

**5. Helper/Error-Text-Tokens:**
```
input.helper.color: {neutral.600}
input.helper.fontSize: 12px (font.size.xs)
input.helper.marginTop: {spacing.1}

input.error.color: {color.error}
input.error.fontSize: 12px
input.error.marginTop: {spacing.1}

input.success.color: {color.success}
```

**6. Form-Layout-Tokens:**
```
form.spacing.labelToInput: {spacing.2}
form.spacing.inputToHelper: {spacing.1}
form.spacing.fieldToField: {spacing.4}
form.spacing.groupToGroup: {spacing.6}
```

**7. Required-Indicator-Tokens:**
```
input.required.color: {color.error}
input.required.symbol: "*"
```

**8. Select-spezifische Tokens:**
```
input.select.iconSize: 20px
input.select.iconColor.default: {neutral.600}
input.select.iconColor.disabled: {neutral.400}
```

**9. Textarea-spezifische Tokens:**
```
input.textarea.minHeight: 120px
input.textarea.resize: vertical
```

**10. Basis-Tokens:**
```
input.base.borderRadius: {borderRadius.base} (4px)
input.base.transition: 150ms ease-in-out
input.base.fontFamily: {font.family.primary}
```

Alle Tokens mit deutschen $description-Texten versehen.
Nutze $schema: "https://design-tokens.org/schema.json" Header.
Style Dictionary Limitierung beachten: Keine Dots in Token-Pfaden (spacing.1.5 Problem aus Phase 2).
  </action>
  <verify>
- Datei existiert: `ls design-system/tokens/forms.json`
- JSON ist valide: `cat design-system/tokens/forms.json | python3 -m json.tool`
- Enthaelt alle 5 Input-Zustaende: grep fuer "default", "hover", "focus", "error", "disabled"
- Referenziert Phase-1-Tokens: grep fuer "{neutral", "{hydrophon", "{spacing"
  </verify>
  <done>
forms.json enthaelt vollstaendiges Token-System mit Input-Groessen, 5-Zustands-Farbsystem, Focus-Ring, Label/Helper/Error-Text, Form-Layout und Required-Indicator Tokens. Alle Token-Referenzen zu bestehenden Primitives vorhanden.
  </done>
</task>

<task type="auto">
  <name>Task 2: Text Input Dokumentation erstellen</name>
  <files>design-system/docs/forms/text-input.md</files>
  <action>
Erstelle `design-system/docs/forms/text-input.md` (deutsche Dokumentation):

**Struktur:**

```markdown
# Text Input

Einzeiliges Texteingabefeld fuer kurze Eingaben wie Name, E-Mail, Telefon.

## Uebersicht

### Anatomie
- Container (Border + Background)
- Input-Text
- Label (oberhalb)
- Placeholder (optional)
- Helper Text (unterhalb, optional)
- Error Message (unterhalb, bei Fehler)
- Success Icon (rechts, bei Erfolg)
- Required Indicator (* bei Pflichtfeld)

### Verwendung
- Formulare aller Art
- Suchfelder (mit Icon)
- Filter-Eingaben

## Groessen

### Small (32px)
- Hoehe: 32px
- Padding: 8px horizontal
- Schriftgroesse: 14px
- Nur Desktop (Touch-Target unter 44px)

### Medium (40px) - Standard
- Hoehe: 40px
- Padding: 12px horizontal
- Schriftgroesse: 16px
- Empfohlen fuer die meisten Formulare

### Large (48px)
- Hoehe: 48px
- Padding: 16px horizontal
- Schriftgroesse: 18px
- Mobile-optimiert, CTAs

## Zustaende

### Default
- Border: neutral.300 (1px)
- Background: neutral.white
- Text: neutral.900

### Hover
- Border: neutral.400 (1px)
- Background: neutral.white
- Cursor: text

### Focus
- Border: hydrophon.blau.500 (2px)
- Focus-Ring: hydrophon.blau.100 (3px)
- Background: neutral.white
- WCAG 2.4.7: :focus-visible verwenden

### Error
- Border: color.error (1px)
- Error-Icon: AlertCircle rechts im Input
- Error-Message unterhalb
- aria-invalid="true"

### Success
- Border: color.success (1px)
- Success-Icon: Check rechts im Input (gruenes Checkmark)
- Zeigt valide Eingabe an

### Disabled
- Background: neutral.50
- Border: neutral.200
- Text: neutral.600 (lesbar, aber reduziert)
- Opacity: 0.7
- cursor: not-allowed
- aria-disabled="true"

## Validierung

### Timing (Progressive Validation)
1. Initial: Validierung bei onBlur (Feld verlassen)
2. Nach Fehler: Validierung bei onChange (jeder Tastendruck)
3. Fehler verschwindet sofort bei korrekter Eingabe

### Fehlermeldungen
- Stil: Erklaerend-hilfsbereit mit Beispielen
- Beispiel: "Bitte gib eine gueltige E-Mail-Adresse ein (z.B. name@firma.de)"
- Position: Direkt unter dem Input
- Farbe: color.error (rot)
- Icon: AlertCircle vor dem Text

## Accessibility

### WCAG Anforderungen
- 3.3.1 Fehlererkennung: Fehler werden identifiziert und beschrieben
- 3.3.2 Labels: Jedes Input hat ein sichtbares Label
- 3.3.3 Fehlervorschlaege: Korrekturhinweise werden gegeben
- 2.4.7 Focus sichtbar: 2px Outline, 3:1 Kontrast
- 4.1.2 Name, Rolle, Wert: aria-required, aria-invalid, aria-describedby

### HTML-Attribute
- id + for/htmlFor fuer Label-Verknuepfung
- aria-required="true" fuer Pflichtfelder
- aria-invalid="true" bei Fehlern
- aria-describedby fuer Helper/Error Text

### Focus-Indicator
- Verwende :focus-visible (nicht :focus)
- 2px Outline-Breite minimum
- 3:1 Kontrast zum Hintergrund

## Code-Beispiel

[CSS-Beispiel mit Token-Variablen]
[HTML-Struktur mit ARIA-Attributen]

## Design Tokens

[Tabelle aller relevanten Token-Namen und Werte]
```

Dokumentation mindestens 200 Zeilen, alle WCAG-Anforderungen explizit genannt, deutsche Sprache durchgaengig.
  </action>
  <verify>
- Datei existiert: `ls design-system/docs/forms/text-input.md`
- Mindestens 200 Zeilen: `wc -l design-system/docs/forms/text-input.md`
- Enthaelt alle 5 Zustaende: grep fuer "Default", "Hover", "Focus", "Error", "Disabled"
- Enthaelt WCAG-Referenzen: grep fuer "WCAG", "3.3.1", "2.4.7"
  </verify>
  <done>
text-input.md dokumentiert vollstaendig: 3 Groessen, 5+1 Zustaende (inkl. Success), Validierungsverhalten, WCAG-Anforderungen, Code-Beispiele. Deutsche Sprache, mindestens 200 Zeilen.
  </done>
</task>

<task type="auto">
  <name>Task 3: Textarea und Select Dokumentation erstellen</name>
  <files>design-system/docs/forms/textarea.md, design-system/docs/forms/select.md</files>
  <action>
**Erstelle `design-system/docs/forms/textarea.md`:**

Struktur:
- Uebersicht und Verwendung (mehrzeilige Texteingabe)
- Groessen (nur Medium und Large empfohlen fuer Textarea)
- Zustaende (gleiche 5 wie Text Input)
- Hoehenverhalten (min-height, resize: vertical)
- Zeichenzaehler (optional)
- Accessibility (WCAG 3.3.x, aria-describedby)
- Code-Beispiel mit Token-Variablen

Mindestens 100 Zeilen.

**Erstelle `design-system/docs/forms/select.md`:**

Struktur:
- Uebersicht (native vs. custom Select)
- Empfehlung: Native `<select>` bevorzugen fuer Accessibility
- Groessen (Small, Medium, Large wie Text Input)
- Zustaende (Default, Hover, Focus, Error, Disabled)
- Dropdown-Icon (ChevronDown, 20px, currentColor)
- Option-Styling (native Grenzen dokumentieren)
- Wann Custom-Select noetig ist (Icons in Options, Multi-Select)
- Accessibility (WCAG 4.1.2, native Keyboard-Navigation)
- Anti-Pattern: Custom div-Dropdowns ohne ARIA
- Code-Beispiel

Mindestens 150 Zeilen.

Beide Dokumentationen:
- Deutsche Sprache
- Token-Referenzen zu forms.json
- WCAG-Compliance-Hinweise
- Konsistenz mit Text Input Dokumentation
  </action>
  <verify>
- Dateien existieren: `ls design-system/docs/forms/textarea.md design-system/docs/forms/select.md`
- Textarea mindestens 100 Zeilen: `wc -l design-system/docs/forms/textarea.md`
- Select mindestens 150 Zeilen: `wc -l design-system/docs/forms/select.md`
- Verzeichnis existiert: `ls -la design-system/docs/forms/`
  </verify>
  <done>
textarea.md und select.md dokumentieren vollstaendig: Verwendung, Groessen, Zustaende, Accessibility. Select enthaelt native-first Empfehlung und Anti-Pattern-Warnung.
  </done>
</task>

</tasks>

<verification>
Nach Abschluss aller Tasks:
1. `npm run build` im design-system Verzeichnis ausfuehren
2. Pruefen: forms.json Tokens erscheinen in build/css/variables.css
3. Pruefen: --input-field-*, --input-label-*, --form-spacing-* CSS-Variablen vorhanden
4. Dokumentations-Verzeichnis: design-system/docs/forms/ enthaelt 3 Markdown-Dateien
</verification>

<success_criteria>
- forms.json existiert mit vollstaendigem Token-System (Input-Groessen, 5 Zustaende, Focus, Labels, Errors)
- Text Input Dokumentation: 200+ Zeilen, alle Zustaende, WCAG-Referenzen
- Textarea Dokumentation: 100+ Zeilen, Groessen, resize-Verhalten
- Select Dokumentation: 150+ Zeilen, native-first Empfehlung
- Style Dictionary Build erfolgreich: forms-Tokens in CSS-Output
- Alle Dokumentation in deutscher Sprache
</success_criteria>

<output>
Nach Abschluss: `.planning/phases/03-forms-a-data-input/03-01-SUMMARY.md` erstellen
</output>
