---
phase: 06-comprehensive-documentation
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - design-system/docs/03-accessibility/overview.md
  - design-system/docs/03-accessibility/wcag-compliance.md
  - design-system/docs/03-accessibility/testing-guide.md
autonomous: true

must_haves:
  truths:
    - "All components meet WCAG 2.1 AA accessibility standards"
    - "Developer can find accessibility implementation patterns"
    - "Tester can verify WCAG compliance using documented approach"
  artifacts:
    - path: "design-system/docs/03-accessibility/overview.md"
      provides: "Central accessibility principles and concepts"
      min_lines: 150
    - path: "design-system/docs/03-accessibility/wcag-compliance.md"
      provides: "Component-level WCAG compliance documentation"
      min_lines: 200
    - path: "design-system/docs/03-accessibility/testing-guide.md"
      provides: "Accessibility testing methodology"
      min_lines: 150
  key_links:
    - from: "design-system/docs/03-accessibility/wcag-compliance.md"
      to: "design-system/docs/buttons.md"
      via: "component reference"
      pattern: "\\[.*\\]\\(.*buttons\\.md.*\\)"
    - from: "design-system/docs/03-accessibility/testing-guide.md"
      to: "axe DevTools"
      via: "tool recommendation"
      pattern: "axe"
---

<objective>
Create consolidated accessibility documentation

Purpose: Prevent accessibility from being scattered appendix across 28 component docs. Create central accessibility guide that explains principles, documents WCAG 2.1 AA compliance per component, and provides testing methodology. Supports success criterion "All components meet WCAG 2.1 AA accessibility standards."

Output: Three accessibility documentation files that consolidate patterns from existing component docs and add testing guidance.
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-comprehensive-documentation/06-CONTEXT.md
@.planning/phases/06-comprehensive-documentation/06-RESEARCH.md

# Existing accessibility patterns in component docs to consolidate:
@design-system/docs/buttons.md
@design-system/docs/forms/validation.md
@design-system/docs/navigation/mobile-drawer.md
@design-system/docs/feedback/modal.md
@design-system/docs/feedback/toast.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Accessibility Overview</name>
  <files>design-system/docs/03-accessibility/overview.md</files>
  <action>
Create a central accessibility overview in German.

Structure:
```markdown
# Barrierefreiheit im Hydrophon Design-System

## Unser Ansatz

Das Hydrophon Design-System erfuellt WCAG 2.1 Level AA. Barrierefreiheit ist keine nachtraegliche Ergaenzung, sondern integraler Bestandteil jeder Komponente.

## Grundprinzipien

### 1. Wahrnehmbar (Perceivable)
- Alle Inhalte haben Textalternativen
- Farbkontraste mindestens 4.5:1 (Text) bzw. 3:1 (grafische Elemente)
- Informationen werden nie nur durch Farbe vermittelt (Farbe + Icon + Text)

### 2. Bedienbar (Operable)
- Alle Funktionen per Tastatur erreichbar
- Fokus-Indikatoren deutlich sichtbar (2px Outline, 3:1 Kontrast)
- Keine Tastaturfallen (ESC schliesst Overlays)
- Touch-Targets mindestens 44x44px (WCAG AAA)

### 3. Verstaendlich (Understandable)
- Konsistente Navigation
- Vorhersehbares Verhalten
- Hilfreiche Fehlermeldungen

### 4. Robust (Robust)
- Valides HTML
- Korrekte ARIA-Attribute
- Kompatibel mit gaengigen Screenreadern

## Kritische ARIA-Patterns

| Komponente | ARIA-Pattern | Details |
|------------|--------------|---------|
| Modal | `role="dialog"`, `aria-modal="true"` | Focus Trap, ESC zum Schliessen |
| Toast (Erfolg/Info) | `role="status"` | Polite announcement |
| Toast (Warnung/Fehler) | `role="alert"` | Assertive announcement |
| Breadcrumb | `aria-current="page"` | Markiert aktuelle Seite |
| Mobile Drawer | `aria-expanded`, `aria-controls` | Toggle-Pattern |
| Formularfelder | `aria-describedby`, `aria-invalid` | Verknuepft Hilfe/Fehler |

## Focus-Management

### Grundregeln
1. Fokus folgt logischer Tab-Reihenfolge
2. Fokus springt in Modal/Drawer bei Oeffnung
3. Fokus kehrt zum Trigger zurueck bei Schliessen
4. Focus Trap in modalen Overlays

### Implementierung
```javascript
// Focus Trap Beispiel (vereinfacht)
const focusableElements = modal.querySelectorAll(
  'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
);
const firstElement = focusableElements[0];
const lastElement = focusableElements[focusableElements.length - 1];

// Tab am Ende -> zurueck zum Anfang
lastElement.addEventListener('keydown', (e) => {
  if (e.key === 'Tab' && !e.shiftKey) {
    e.preventDefault();
    firstElement.focus();
  }
});
```

## Farbkontraste

| Element | Mindestkontrast | Hydrophon-Werte |
|---------|-----------------|-----------------|
| Normaler Text | 4.5:1 | Grau #575656 auf Weiss = 5.9:1 |
| Grosser Text (>=18px bold) | 3:1 | Erfuellt |
| Fokus-Indikatoren | 3:1 | Blau #008BD2 = 4.5:1 |
| Fehlerfarbe | 4.5:1 | Rot auf Weiss = 4.8:1 |

## Tastatur-Navigation

### Globale Shortcuts
| Taste | Aktion |
|-------|--------|
| Tab | Naechstes fokussierbares Element |
| Shift+Tab | Vorheriges Element |
| Enter/Space | Aktiviert Button/Link |
| ESC | Schliesst Modal/Drawer/Tooltip |
| Pfeiltasten | Navigation in Radio-Groups |

## Weiterf√ºhrende Dokumentation

- [WCAG 2.1 AA Compliance pro Komponente](./wcag-compliance.md)
- [Testing-Anleitung](./testing-guide.md)
```

~150-200 lines. Consolidate principles from existing component docs.
  </action>
  <verify>
File exists at `design-system/docs/03-accessibility/overview.md`
Contains WCAG 2.1 reference
Contains ARIA patterns table
Contains focus management section
Line count 150-220: `wc -l design-system/docs/03-accessibility/overview.md`
  </verify>
  <done>
Overview provides single reference for:
- WCAG 2.1 AA commitment
- Critical ARIA patterns (table)
- Focus management rules
- Keyboard navigation patterns
  </done>
</task>

<task type="auto">
  <name>Task 2: Create WCAG Compliance Documentation</name>
  <files>design-system/docs/03-accessibility/wcag-compliance.md</files>
  <action>
Create component-level WCAG compliance documentation in German.

Structure:
```markdown
# WCAG 2.1 AA Compliance

Komponenten-spezifische Accessibility-Anforderungen und deren Umsetzung.

## Compliance-Uebersicht

| Komponente | WCAG Level | Erfuellt | Details |
|------------|------------|----------|---------|
| Buttons | AA | Ja | [Details](#buttons) |
| Text Inputs | AA | Ja | [Details](#text-inputs) |
| Modal | AA | Ja | [Details](#modal) |
| Toast | AA | Ja | [Details](#toast) |
| ... | ... | ... | ... |

## Buttons

### Relevante WCAG-Kriterien
- **1.4.3 Kontrast (Minimum)**: 4.5:1 fuer Text
- **2.1.1 Tastatur**: Alle Buttons per Enter/Space aktivierbar
- **2.4.7 Fokus sichtbar**: 2px Outline mit 2px Offset

### Umsetzung
- Primaer-Button: Weiss auf Blau = 4.9:1 Kontrast
- Fokus-Ring: `outline: 2px solid var(--color-focus)`, 3:1 Kontrast
- Touch-Target: Minimum 44px (WCAG AAA)

### Vollstaendige Spezifikation
-> [Button-Dokumentation](../buttons.md)

## Text Inputs

### Relevante WCAG-Kriterien
- **1.3.1 Info und Beziehungen**: Label mit for/id verknuepft
- **1.4.1 Farbe nicht allein**: Fehler mit Farbe + Icon + Text
- **3.3.1 Fehlererkennung**: Fehler werden identifiziert und beschrieben
- **3.3.2 Labels oder Anweisungen**: Jedes Feld hat Label

### Umsetzung
- Labels: `<label for="field-id">` Verknuepfung
- Fehler: `aria-invalid="true"` + `aria-describedby="error-id"`
- Hilfetexte: `aria-describedby` Verknuepfung
- Pflichtfelder: `required` + `aria-required="true"` + visueller Stern

### Vollstaendige Spezifikation
-> [Text-Input Dokumentation](../forms/text-input.md)
-> [Validierung](../forms/validation.md)

## Select

### Relevante WCAG-Kriterien
- **1.3.1 Info und Beziehungen**: Label verknuepft
- **2.1.1 Tastatur**: Native Tastaturnavigation

### Umsetzung
- Native `<select>` bevorzugt fuer optimale Accessibility
- Custom Selects nur mit vollstaendiger ARIA-Implementierung

-> [Select-Dokumentation](../forms/select.md)

## Checkbox & Radio

### Relevante WCAG-Kriterien
- **1.3.1 Info und Beziehungen**: Fieldset/Legend fuer Gruppen
- **2.1.1 Tastatur**: Space zum Togglen, Pfeiltasten in Radio-Groups
- **4.1.2 Name, Rolle, Wert**: Native Input erhalten (opacity:0, nicht display:none)

### Umsetzung
- Native Input mit `opacity: 0` statt `display: none`
- Fieldset + Legend fuer Gruppierung
- Focus-Indikatoren auf :focus-visible

-> [Checkbox](../forms/checkbox.md)
-> [Radio Button](../forms/radio-button.md)

## Navigation (Header, Mobile Drawer)

### Relevante WCAG-Kriterien
- **2.1.2 Keine Tastaturfalle**: ESC schliesst Drawer
- **2.4.4 Linkzweck**: Aussagekraeftige Link-Texte
- **4.1.2 Name, Rolle, Wert**: `aria-expanded`, `aria-controls`

### Umsetzung
- Mobile Drawer: Focus Trap aktiv, ESC zum Schliessen
- Toggle-Button: `aria-expanded="true/false"`, `aria-controls="drawer-id"`
- Server-Side `aria-current="page"` fuer aktive Navigation

-> [Header](../navigation/header.md)
-> [Mobile Drawer](../navigation/mobile-drawer.md)

## Modal

### Relevante WCAG-Kriterien
- **2.1.2 Keine Tastaturfalle**: ESC zum Schliessen
- **2.4.3 Fokusreihenfolge**: Fokus springt in Modal
- **4.1.2 Name, Rolle, Wert**: `role="dialog"`, `aria-modal="true"`

### Umsetzung
- `role="dialog"` + `aria-modal="true"` + `aria-labelledby`
- Focus Trap: Tab bleibt im Modal
- Fokus auf erstes Element oder Close-Button bei Oeffnung
- Fokus zurueck zum Trigger bei Schliessen
- Radix UI Dialog empfohlen (battle-tested Accessibility)

-> [Modal-Dokumentation](../feedback/modal.md)

## Toast Notifications

### Relevante WCAG-Kriterien
- **4.1.3 Statusmeldungen**: Screenreader-Ankuendigung ohne Fokus-Aenderung

### Umsetzung
- Erfolg/Info: `role="status"` (polite announcement)
- Warnung/Fehler: `role="alert"` (assertive announcement)
- Fehler-Toasts bleiben sichtbar (keine Auto-Dismiss)
- Sonner-Library mit eingebauter ARIA-Unterstuetzung

-> [Toast-Dokumentation](../feedback/toast.md)

## Tooltips

### Relevante WCAG-Kriterien
- **1.4.13 Inhalt bei Hover oder Fokus**: Tooltip bleibt bei Hover sichtbar

### Umsetzung
- Tooltip bleibt offen bei Hover ueber Tooltip-Inhalt
- ESC zum Schliessen
- Fokus-Trigger zeigt Tooltip (nicht nur Maus)
- Floating UI fuer Viewport-Collision-Detection

-> [Tooltip-Dokumentation](../feedback/tooltip.md)

## Loading States

### Relevante WCAG-Kriterien
- **2.2.2 Pausieren, Stoppen, Ausblenden**: Animationen respektieren prefers-reduced-motion

### Umsetzung
- `@media (prefers-reduced-motion: reduce)`: Statischer Spinner, kein Shimmer
- Spinner-Verzoegerung 200ms: Verhindert Flackern bei schnellen Operationen
- Progress-Bar: Native `<progress>` mit eingebauter Screenreader-Unterstuetzung

-> [Loading-Dokumentation](../feedback/loading.md)
```

~200-300 lines. Extract and consolidate from existing component docs.
  </action>
  <verify>
File exists at `design-system/docs/03-accessibility/wcag-compliance.md`
Contains component compliance table
Contains WCAG criterion references (e.g., 1.4.3, 2.1.1)
Links to component docs for full specs
Line count 200-320: `wc -l design-system/docs/03-accessibility/wcag-compliance.md`
  </verify>
  <done>
WCAG compliance doc provides:
- Component compliance overview table
- Specific WCAG criteria per component
- Implementation notes (what we did)
- Links to detailed component docs
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Testing Guide</name>
  <files>design-system/docs/03-accessibility/testing-guide.md</files>
  <action>
Create accessibility testing guide in German.

Structure:
```markdown
# Accessibility Testing Guide

Anleitung zur Ueberpruefung der WCAG 2.1 AA Compliance.

## Test-Strategie

Accessibility-Testing folgt der 30/70-Regel:
- **30%** der Probleme werden durch automatisierte Tools gefunden
- **70%** erfordern manuelle Pruefung

Beide Ansaetze sind erforderlich fuer vollstaendige WCAG-Compliance.

## Automatisierte Tests

### axe DevTools (Empfohlen)

Browser-Extension fuer Chrome/Firefox/Edge.

**Installation:**
1. Chrome Web Store -> "axe DevTools" suchen
2. Extension installieren
3. DevTools oeffnen (F12)
4. Tab "axe DevTools" waehlen

**Verwendung:**
1. Seite laden
2. "Analyze" klicken
3. Ergebnisse nach Schweregrad sortieren
4. Issues beheben und erneut testen

**Was axe findet:**
- Fehlende alt-Texte
- Kontrastprobleme
- Fehlende Labels
- Ungueltige ARIA-Attribute
- Fokusreihenfolge-Probleme

**Was axe NICHT findet:**
- Ob Labels sinnvoll sind (nur dass sie existieren)
- Ob Fokusreihenfolge logisch ist
- Ob Inhalte verstaendlich sind
- Komplexe Interaktionsmuster

### Lighthouse

In Chrome DevTools integriert.

1. DevTools oeffnen (F12)
2. Tab "Lighthouse"
3. "Accessibility" auswaehlen
4. "Analyze page load"

Lighthouse gibt Score 0-100. Ziel: 90+

## Manuelle Tests

### Tastatur-Navigation

**Checkliste:**
- [ ] Alle interaktiven Elemente per Tab erreichbar
- [ ] Fokus-Indikator immer sichtbar
- [ ] Logische Tab-Reihenfolge (links-rechts, oben-unten)
- [ ] Enter/Space aktiviert Buttons und Links
- [ ] ESC schliesst Modals/Drawers/Tooltips
- [ ] Pfeiltasten funktionieren in Radio-Groups
- [ ] Keine Tastaturfallen (Fokus kann immer weiterbewegt werden)

**Test-Methode:**
1. Mouse wegnehmen / Touch deaktivieren
2. Mit Tab durch Seite navigieren
3. Alle Funktionen nur per Tastatur ausfuehren

### Screenreader-Test

**Empfohlene Screenreader:**
| Plattform | Screenreader | Kosten |
|-----------|--------------|--------|
| Windows | NVDA | Kostenlos |
| Windows | JAWS | Kommerziell |
| macOS | VoiceOver | Integriert (Cmd+F5) |

**Grundlegende NVDA-Befehle:**
| Taste | Aktion |
|-------|--------|
| Caps Lock + Leertaste | NVDA-Modus wechseln |
| Tab | Naechstes fokussierbares Element |
| H | Naechste Ueberschrift |
| B | Naechster Button |
| E | Naechstes Eingabefeld |

**Checkliste:**
- [ ] Seitenstruktur wird korrekt vorgelesen (Ueberschriften-Hierarchie)
- [ ] Bilder haben sinnvolle alt-Texte
- [ ] Formularfelder werden mit Label vorgelesen
- [ ] Fehler werden angekuendigt
- [ ] Statusaenderungen (Toasts) werden angekuendigt
- [ ] Modal-Inhalte werden vorgelesen

### Kontrastpruefung

**Tools:**
- WebAIM Contrast Checker: https://webaim.org/resources/contrastchecker/
- Browser DevTools: Element inspizieren -> Contrast ratio wird angezeigt

**Mindestanforderungen:**
| Element | Minimum |
|---------|---------|
| Normaler Text | 4.5:1 |
| Grosser Text (18px+ bold oder 24px+) | 3:1 |
| Grafische Elemente (Icons, Fokus) | 3:1 |

### Zoom-Test

**Methode:**
1. Browser auf 200% zoomen (Cmd/Ctrl + +)
2. Pruefen: Kein Text abgeschnitten?
3. Pruefen: Horizontal scrollen noetig? (sollte nicht)
4. Pruefen: Funktionalitaet erhalten?

### Motion-Test

**Methode:**
1. In Betriebssystem "Reduzierte Bewegung" aktivieren:
   - macOS: Systemeinstellungen -> Bedienungshilfen -> Anzeige -> Bewegung reduzieren
   - Windows: Einstellungen -> Erleichterte Bedienung -> Anzeige -> Animationen deaktivieren
2. Seite neu laden
3. Pruefen: Animationen reduziert/entfernt?
4. Pruefen: Spinner, Progress, Skeleton funktional?

## Test-Checkliste fuer neue Komponenten

Vor Release einer neuen Komponente:

### Automatisiert
- [ ] axe DevTools: 0 kritische Fehler
- [ ] Lighthouse Accessibility: Score 90+

### Manuell
- [ ] Tastatur: Alle Funktionen erreichbar
- [ ] Fokus: Indikator immer sichtbar
- [ ] Screenreader: Inhalte verstaendlich vorgelesen
- [ ] Kontrast: Alle Texte 4.5:1
- [ ] Zoom: 200% funktional
- [ ] Reduced Motion: Animationen respektieren Einstellung

### ARIA
- [ ] Labels: Alle interaktiven Elemente haben accessible name
- [ ] Rollen: Korrekte role-Attribute
- [ ] States: aria-expanded, aria-selected, aria-checked korrekt
- [ ] Dynamik: Live regions fuer Status-Updates

## Haeufige Fehler und Loesungen

| Fehler | Loesung |
|--------|---------|
| "Form elements must have labels" | `<label for="id">` hinzufuegen |
| "Elements must have sufficient color contrast" | Kontrast erhoehen oder Schriftgroesse |
| "Interactive controls must be focusable" | `tabindex="0"` oder native Element |
| "ARIA attributes must conform to valid values" | ARIA-Spezifikation pruefen |
| "Focus order should be logical" | DOM-Reihenfolge anpassen |
```

~150-200 lines. Practical testing guide with checklists.
  </action>
  <verify>
File exists at `design-system/docs/03-accessibility/testing-guide.md`
Contains axe DevTools instructions
Contains keyboard testing checklist
Contains screenreader testing section
Line count 150-220: `wc -l design-system/docs/03-accessibility/testing-guide.md`
  </verify>
  <done>
Testing guide enables:
- Developer to run axe DevTools and interpret results
- Tester to perform keyboard navigation checks
- Team to verify WCAG 2.1 AA compliance before release
  </done>
</task>

</tasks>

<verification>
1. All three accessibility files exist in 03-accessibility/
2. Overview explains WCAG principles and ARIA patterns
3. Compliance doc covers all major components with WCAG references
4. Testing guide has actionable checklists
5. German language throughout
6. Links to component docs for detailed specs
</verification>

<success_criteria>
- Accessibility is consolidated (not scattered appendix)
- WCAG 2.1 AA compliance is documented per component
- Testing methodology is actionable (not just theory)
- Success criterion "All components meet WCAG 2.1 AA" is verifiable using this documentation
</success_criteria>

<output>
After completion, create `.planning/phases/06-comprehensive-documentation/06-03-SUMMARY.md`
</output>
