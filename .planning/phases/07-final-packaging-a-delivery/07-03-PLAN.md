---
phase: 07-final-packaging-a-delivery
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - design-system/scripts/export-palettes.js
  - design-system/dist/palettes/hydrophon-colors.ase
  - design-system/dist/palettes/hydrophon-colors.gpl
  - design-system/dist/palettes/README.md
  - design-system/package.json
autonomous: true
gap_closure: false

must_haves:
  truths:
    - "Designer can import color palette into Adobe tools"
    - "Designer can import color palette into GIMP"
    - "Colors match design token values exactly"
    - "Palettes include all brand colors with descriptive names"
  artifacts:
    - path: "design-system/dist/palettes/hydrophon-colors.ase"
      provides: "Adobe Swatch Exchange file for Illustrator/Photoshop"
    - path: "design-system/dist/palettes/hydrophon-colors.gpl"
      provides: "GIMP Palette file"
    - path: "design-system/dist/palettes/README.md"
      provides: "Import instructions for design tools"
    - path: "design-system/scripts/export-palettes.js"
      provides: "Automated palette generation script"
  key_links:
    - from: "design-system/scripts/export-palettes.js"
      to: "design-system/build/json/tokens.json"
      via: "JSON token reading"
      pattern: "readFile.*tokens\\.json"
---

<objective>
Export color palettes in ASE (Adobe) and GPL (GIMP) formats from design tokens.

Purpose: Enable designers to use Hydrophon brand colors directly in Adobe Creative Suite and GIMP without manual color entry.

Output:
- `dist/palettes/hydrophon-colors.ase` - Adobe Swatch Exchange for Illustrator/Photoshop
- `dist/palettes/hydrophon-colors.gpl` - GIMP Palette format
- `dist/palettes/README.md` - Import instructions
- `scripts/export-palettes.js` - Automated export script
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-final-packaging-a-delivery/07-RESEARCH.md

# Token structure
@design-system/tokens/colors.json
@design-system/build/json/tokens.json
@design-system/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install adobe-swatch-exchange and create palette export script</name>
  <files>
    - design-system/package.json
    - design-system/scripts/export-palettes.js
  </files>
  <action>
1. Install adobe-swatch-exchange:
   ```bash
   cd design-system && npm install --save-dev adobe-swatch-exchange
   ```

2. Create `design-system/scripts/export-palettes.js` with:
   - Import adobe-swatch-exchange, fs/promises
   - Read colors from `tokens/colors.json` (source of truth)
   - Helper function to convert hex to RGB array:
     ```javascript
     function hexToRgb(hex) {
       const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
       return result ? [
         parseInt(result[1], 16) / 255,
         parseInt(result[2], 16) / 255,
         parseInt(result[3], 16) / 255
       ] : [0, 0, 0];
     }
     ```
   - Extract brand colors from tokens structure:
     - hydrophon.blau (50-900 scale + 500 primary)
     - gluy.hellblau (50-900 scale)
     - gluy.dunkelblau (50-900 scale)
     - hyhero (colors if defined)
     - hyindustry (colors if defined)
     - neutral (50-900 scale)
     - semantic colors (success, warning, error, info)
   - Build ASE color array with descriptive German names:
     ```javascript
     const colors = [
       { name: 'Hydrophon Blau 500', model: 'RGB', color: hexToRgb('#008bd2'), type: 'global' },
       // ... all colors
     ];
     ```
   - Encode ASE: `ase.encode({ version: '1.0', groups: [], colors })`
   - Write to dist/palettes/hydrophon-colors.ase

3. Add GPL (GIMP) export:
   - GPL format is plain text:
     ```
     GIMP Palette
     Name: Hydrophon Colors
     #
     R G B  ColorName
     ```
   - Convert hex to RGB integers (0-255)
   - Write to dist/palettes/hydrophon-colors.gpl

4. Add npm script:
   ```json
   "scripts": {
     "build:palettes": "node scripts/export-palettes.js"
   }
   ```
  </action>
  <verify>
    - `design-system/scripts/export-palettes.js` exists
    - package.json includes adobe-swatch-exchange dependency
    - package.json has build:palettes script
  </verify>
  <done>Palette export script handles ASE and GPL formats</done>
</task>

<task type="auto">
  <name>Task 2: Generate palettes and verify color accuracy</name>
  <files>
    - design-system/dist/palettes/hydrophon-colors.ase
    - design-system/dist/palettes/hydrophon-colors.gpl
  </files>
  <action>
1. Create output directory:
   ```bash
   mkdir -p design-system/dist/palettes
   ```

2. Ensure Style Dictionary has built tokens:
   ```bash
   cd design-system && npm run build
   ```

3. Run palette export:
   ```bash
   cd design-system && npm run build:palettes
   ```

4. Verify ASE file:
   - File exists and has reasonable size (should be a few KB)
   - Binary file format - check it's not empty

5. Verify GPL file:
   - File exists and is readable text
   - Contains "GIMP Palette" header
   - Contains color entries with RGB values and names
   - Spot-check: Hydrophon Blau 500 should be "0 139 210" (RGB of #008bd2)

6. Expected palette contents (minimum):
   - Hydrophon Blau scale (50, 100, 200, 300, 400, 500, 600, 700, 800, 900)
   - Gluy Hellblau scale
   - Gluy Dunkelblau scale
   - Neutral scale
   - Semantic colors (success, warning, error, info)
  </action>
  <verify>
    - `design-system/dist/palettes/hydrophon-colors.ase` exists (binary, > 1KB)
    - `design-system/dist/palettes/hydrophon-colors.gpl` exists (text file)
    - GPL file contains "GIMP Palette" header
    - GPL file contains "0 139 210" (Hydrophon Blau 500 RGB)
  </verify>
  <done>Color palettes are generated in ASE and GPL formats</done>
</task>

<task type="auto">
  <name>Task 3: Create palette README with import instructions</name>
  <files>
    - design-system/dist/palettes/README.md
  </files>
  <action>
Create `design-system/dist/palettes/README.md` in German with:

1. Header: "# Hydrophon Farbpaletten v1.0.0"

2. Inhalt section:
   - `hydrophon-colors.ase` - Adobe Swatch Exchange (Illustrator, Photoshop, InDesign)
   - `hydrophon-colors.gpl` - GIMP Palette

3. Adobe-Import section (ASE):
   - Illustrator: Fenster > Farbfelder > Farbfelder-Optionen (Menue) > Farbfeldbibliothek oeffnen > Andere Bibliothek > hydrophon-colors.ase
   - Photoshop: Fenster > Farbfelder > (Menue) > Farbfelder importieren > hydrophon-colors.ase
   - InDesign: Fenster > Farbe > Farbfelder > (Menue) > Farbfelder laden > hydrophon-colors.ase

4. GIMP-Import section (GPL):
   - Datei nach ~/.config/GIMP/2.10/palettes/ kopieren (Linux/Mac)
   - Oder: Windows > Dockbare Dialoge > Paletten > Palette importieren

5. Enthaltene Farben section with table:
   | Farbgruppe | Anzahl | Beschreibung |
   |------------|--------|--------------|
   | Hydrophon Blau | 10 | Primaerfarbe (50-900) |
   | Gluy Hellblau | 10 | Produktlinie Gluy hell |
   | Gluy Dunkelblau | 10 | Produktlinie Gluy dunkel |
   | Neutral | 10 | Graustufen (50-900) |
   | Semantisch | 4 | Success, Warning, Error, Info |

6. Hinweis: Alle Farben sind RGB/sRGB fuer digitale Verwendung. Fuer Druckproduktion bitte professionelle CMYK-Konvertierung durchfuehren.

7. Version and date
  </action>
  <verify>
    - File `design-system/dist/palettes/README.md` exists
    - README contains import instructions for Adobe apps and GIMP
    - Content is in German
  </verify>
  <done>Palette package includes import instructions for design tools</done>
</task>

</tasks>

<verification>
1. `npm run build:palettes` completes without errors
2. ASE file is valid binary (not corrupted)
3. GPL file is valid text with GIMP Palette header
4. Colors in GPL match hex values from design tokens
5. README provides clear German import instructions
</verification>

<success_criteria>
- Designer can import ASE file into Adobe Illustrator/Photoshop
- Designer can import GPL file into GIMP
- All brand colors (Hydrophon, Gluy, neutrals, semantics) are included
- Colors match design token hex values exactly
- Palette export is automated via `npm run build:palettes`
</success_criteria>

<output>
After completion, create `.planning/phases/07-final-packaging-a-delivery/07-03-SUMMARY.md`
</output>
