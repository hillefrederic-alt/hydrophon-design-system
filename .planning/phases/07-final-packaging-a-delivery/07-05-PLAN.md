---
phase: 07-final-packaging-a-delivery
plan: 05
type: execute
wave: 2
depends_on: ["07-01", "07-02", "07-03", "07-04"]
files_modified:
  - design-system/scripts/package-release.js
  - design-system/dist/packages/hydrophon-ds-complete-v1.0.0.zip
  - design-system/dist/packages/hydrophon-ds-logos-v1.0.0.zip
  - design-system/dist/packages/hydrophon-ds-tokens-v1.0.0.zip
  - design-system/dist/packages/hydrophon-ds-marketing-v1.0.0.zip
  - design-system/package.json
autonomous: true
gap_closure: false

must_haves:
  truths:
    - "All assets are versioned and organized with clear naming"
    - "Agency can download complete package with all deliverables"
    - "Developer can download token-only package"
    - "Marketing can download documentation package"
    - "Each package includes README with contents listing"
  artifacts:
    - path: "design-system/dist/packages/hydrophon-ds-complete-v1.0.0.zip"
      provides: "Complete design system package (all deliverables)"
    - path: "design-system/dist/packages/hydrophon-ds-logos-v1.0.0.zip"
      provides: "Logo assets package for agencies"
    - path: "design-system/dist/packages/hydrophon-ds-tokens-v1.0.0.zip"
      provides: "Design tokens package for developers"
    - path: "design-system/dist/packages/hydrophon-ds-marketing-v1.0.0.zip"
      provides: "PDF documentation for marketing"
    - path: "design-system/scripts/package-release.js"
      provides: "Automated packaging script"
  key_links:
    - from: "design-system/scripts/package-release.js"
      to: "design-system/dist/*"
      via: "archiver ZIP creation"
      pattern: "archive\\.directory"
---

<objective>
Create stakeholder-specific ZIP distribution packages combining all Phase 7 outputs.

Purpose: Enable targeted distribution - agencies get everything, developers get tokens, marketing gets documentation - with clear versioning and README files in each package.

Output:
- `dist/packages/hydrophon-ds-complete-v1.0.0.zip` - All deliverables
- `dist/packages/hydrophon-ds-logos-v1.0.0.zip` - Logo assets only
- `dist/packages/hydrophon-ds-tokens-v1.0.0.zip` - Design tokens only
- `dist/packages/hydrophon-ds-marketing-v1.0.0.zip` - PDF + brand guidelines
- `scripts/package-release.js` - Automated packaging script
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-final-packaging-a-delivery/07-RESEARCH.md

# Prior plan outputs (all must exist)
@.planning/phases/07-final-packaging-a-delivery/07-01-SUMMARY.md
@.planning/phases/07-final-packaging-a-delivery/07-02-SUMMARY.md
@.planning/phases/07-final-packaging-a-delivery/07-03-SUMMARY.md
@.planning/phases/07-final-packaging-a-delivery/07-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install archiver and create packaging script</name>
  <files>
    - design-system/package.json
    - design-system/scripts/package-release.js
  </files>
  <action>
1. Install archiver for ZIP creation:
   ```bash
   cd design-system && npm install --save-dev archiver
   ```

2. Create `design-system/scripts/package-release.js` with:
   - Import archiver, fs, path
   - Define version: '1.0.0'
   - Create output directory: dist/packages/

   - Function createZip(filename, sources, description):
     ```javascript
     async function createZip(filename, sources, description) {
       const output = fs.createWriteStream(path.join('dist/packages', filename));
       const archive = archiver('zip', { zlib: { level: 9 } });

       // Create README content
       const readme = generateReadme(description, sources);
       archive.append(readme, { name: 'README.md' });

       // Add source directories/files
       for (const { src, dest } of sources) {
         if (fs.statSync(src).isDirectory()) {
           archive.directory(src, dest === '.' ? false : dest);
         } else {
           archive.file(src, { name: dest || path.basename(src) });
         }
       }

       archive.pipe(output);
       await archive.finalize();

       console.log(`Created ${filename} (${archive.pointer()} bytes)`);
     }
     ```

   - Function generateReadme(description, sources) returning German markdown

   - Package definitions:
     a) Complete package:
        - dist/documentation -> documentation/
        - dist/assets/logos -> assets/logos/
        - dist/tokens -> tokens/
        - dist/palettes -> palettes/

     b) Logo package:
        - dist/assets/logos -> .

     c) Token package:
        - dist/tokens -> .

     d) Marketing package:
        - dist/documentation -> documentation/
        - dist/palettes -> palettes/

3. Add npm script:
   ```json
   "scripts": {
     "build:packages": "node scripts/package-release.js"
   }
   ```

4. Add combined build script:
   ```json
   "scripts": {
     "release": "npm run build && npm run build:pdf && npm run build:assets && npm run build:palettes && npm run build:packages"
   }
   ```
  </action>
  <verify>
    - `design-system/scripts/package-release.js` exists
    - package.json includes archiver dependency
    - package.json has build:packages and release scripts
  </verify>
  <done>Packaging script is configured with stakeholder-specific package definitions</done>
</task>

<task type="auto">
  <name>Task 2: Generate all distribution packages</name>
  <files>
    - design-system/dist/packages/hydrophon-ds-complete-v1.0.0.zip
    - design-system/dist/packages/hydrophon-ds-logos-v1.0.0.zip
    - design-system/dist/packages/hydrophon-ds-tokens-v1.0.0.zip
    - design-system/dist/packages/hydrophon-ds-marketing-v1.0.0.zip
  </files>
  <action>
1. Verify all prior plan outputs exist:
   ```bash
   ls design-system/dist/documentation/*.pdf
   ls design-system/dist/assets/logos/svg/
   ls design-system/dist/tokens/package.json
   ls design-system/dist/palettes/*.ase
   ```

   If any are missing, run the prerequisite builds:
   ```bash
   cd design-system
   npm run build        # Style Dictionary tokens
   npm run build:pdf    # PDF documentation
   npm run build:assets # Logo assets
   npm run build:palettes # Color palettes
   ```

2. Create packages directory:
   ```bash
   mkdir -p design-system/dist/packages
   ```

3. Run packaging script:
   ```bash
   cd design-system && npm run build:packages
   ```

4. Verify all packages created:
   ```bash
   ls -la design-system/dist/packages/
   ```

   Expected output:
   - hydrophon-ds-complete-v1.0.0.zip (largest, contains everything)
   - hydrophon-ds-logos-v1.0.0.zip (medium, SVG + PNG)
   - hydrophon-ds-tokens-v1.0.0.zip (small, CSS/SCSS/JSON)
   - hydrophon-ds-marketing-v1.0.0.zip (PDF + palettes)

5. Validate package contents by testing extraction:
   ```bash
   cd design-system/dist/packages
   unzip -l hydrophon-ds-complete-v1.0.0.zip | head -30
   ```
  </action>
  <verify>
    - All 4 ZIP files exist in design-system/dist/packages/
    - Complete package contains documentation/, assets/, tokens/, palettes/
    - Logo package contains svg/ and png/ directories
    - Token package contains css/, scss/, json/, and package.json
    - Marketing package contains PDF and palettes/
  </verify>
  <done>All distribution packages are generated with correct contents</done>
</task>

<task type="auto">
  <name>Task 3: Create release manifest and verify package integrity</name>
  <files>
    - design-system/dist/RELEASE.md
  </files>
  <action>
1. Create `design-system/dist/RELEASE.md` with:

   ```markdown
   # Hydrophon Design System v1.0.0

   **Release Date:** [Current date YYYY-MM-DD]

   ## Pakete

   | Paket | Groesse | Zielgruppe | Inhalt |
   |-------|---------|------------|--------|
   | hydrophon-ds-complete-v1.0.0.zip | ~X MB | Alle | Dokumentation, Logos, Tokens, Paletten |
   | hydrophon-ds-logos-v1.0.0.zip | ~X MB | Agenturen | SVG, PNG in allen Aufloesungen |
   | hydrophon-ds-tokens-v1.0.0.zip | ~X KB | Entwickler | CSS, SCSS, JSON Tokens |
   | hydrophon-ds-marketing-v1.0.0.zip | ~X MB | Marketing | PDF-Dokumentation, Farbpaletten |

   ## Checksums (SHA-256)

   ```
   [sha256sum for each package]
   ```

   ## Aenderungen

   ### v1.0.0 (Initial Release)

   - Foundation: Farben, Typografie, Spacing, Grid, Effekte
   - Logo-System: Hydrophon, Gluy, HyHero, HyIndustry
   - Icons: Lucide-basiertes System
   - Buttons: Primary, Secondary, Tertiary mit allen Zustaenden
   - Forms: Input, Textarea, Select, Checkbox, Radio, Validation
   - Navigation: Header, Footer, Breadcrumb, Mobile Drawer
   - Content: Product Cards, Content Cards, Data Tables
   - Feedback: Modal, Tooltip, Toast, Loading States
   - Dokumentation: 26,658+ Zeilen deutsche Dokumentation

   ## Installation

   Siehe README.md in jedem Paket fuer spezifische Anweisungen.
   ```

2. Generate actual file sizes by reading ZIP files:
   ```bash
   ls -lh design-system/dist/packages/*.zip
   ```

3. Generate SHA-256 checksums:
   ```bash
   cd design-system/dist/packages
   shasum -a 256 *.zip
   ```

4. Update RELEASE.md with actual values

5. Final verification checklist:
   - [ ] All 4 packages exist
   - [ ] Each package extracts without errors
   - [ ] Each package contains README.md
   - [ ] File sizes are reasonable
   - [ ] German characters in READMEs display correctly
  </action>
  <verify>
    - `design-system/dist/RELEASE.md` exists with package table and checksums
    - All packages have SHA-256 checksums listed
    - File sizes in table match actual package sizes
  </verify>
  <done>Release manifest documents all packages with verification checksums</done>
</task>

</tasks>

<verification>
1. All 4 ZIP packages exist in dist/packages/
2. Each package extracts without errors
3. Each package contains README.md with contents description
4. RELEASE.md has accurate file sizes and checksums
5. Complete package contains all subdirectories
6. `npm run release` builds everything from scratch
</verification>

<success_criteria>
- Agency can download hydrophon-ds-complete-v1.0.0.zip with all deliverables
- Developer can download hydrophon-ds-tokens-v1.0.0.zip for quick integration
- Marketing can download hydrophon-ds-marketing-v1.0.0.zip with PDF
- Each package has clear README with contents and usage instructions
- RELEASE.md provides manifest with checksums for integrity verification
- All packages are versioned (v1.0.0) for tracking
</success_criteria>

<output>
After completion, create `.planning/phases/07-final-packaging-a-delivery/07-05-SUMMARY.md`
</output>
